<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">


</head>

<body class="Undertow.js 1.0.1.Final has been released">
  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="active">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          
            <a href="/wildflysite/docs/14/" class="">Docs</a>
          
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="post-page grid-wrapper">
  <!-- <div class="grid__item width-12-12"><h1 class="title">Undertow.js 1.0.1.Final has been released</h1></div> -->
  <!-- <div class="grid__item width-2-12 doc-toc"><ul class="inline_toc">
  <li><a href="#undertow-js-1-0-1-final-has-been-released">Undertow.js 1.0.1.Final has been released</a></li>
  <li><a href="#websocket-support">Websocket Support</a></li>
  <li><a href="#declarative-security">Declarative Security</a></li>
  <li><a href="#transaction-support">Transaction Support</a></li>
  <li><a href="#option-map-defaults">Option map defaults</a></li>
  <li><a href="#freemarker-support">Freemarker support</a></li>
  <li><a href="#going-forward">Going forward</a></li>
</ul></div> -->
  <div class="grid__item width-10-12 doc-content"><div class="sect1">
<h2 id="undertow-js-1-0-1-final-has-been-released">Undertow.js 1.0.1.Final has been released</h2>
<div class="sectionbody">
<div class="paragraph">
<p>sdouglas
2015-11-02</p>
</div>
<div class="paragraph">
<p>Undertow.js 1.0.1.Final has been released. This allows you to integrate JavaScript and Java EE in your applications. There
have been some notable changes since I first wrote about this at <a href="http://wildfly.org/news/2015/08/10/Javascript-Support-In-Wildfly/" class="bare">http://wildfly.org/news/2015/08/10/Javascript-Support-In-Wildfly/</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="websocket-support">Websocket Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is now possible to use WebSockets with Undertow.js. You can declare a websocket handler with the websocket method,
which takes a path and a connection handler. The connection handler gets passed the connection object, which can be
used to send messages, and can respond to messages by setting the onText, onBinary and onClose functions.</p>
</div>
<div class="paragraph">
<p>Binary messages are send and received using the JavaScript ArrayBuffer object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$undertow
    .websocket("/websocket1", ['cdi:myBean', function (myBean, connection) {
        connection.send(myBean.getConnectedMessage());
        connection.onText = function(message) {
            return "echo-" + message;
        }
        connection.onBinary = function(message) {
            return message;
        }
        connection.onClose = function (message) {
            print(message.reason + " " + message.code);
        }
    }]);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="declarative-security">Declarative Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Declarative security allows you to specify the roles that are allowed to use a certain handler. This uses standard Servlet
authentication, so if a user is not authenticated then the container will attempt to authenticate them using whatever
authentication mechanism is defined in web.xml. The special role '**' means any authenticated user.</p>
</div>
<div class="paragraph">
<p>To use this we simply need to add a roles_allowed list to a handlers options map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$undertow
    .onGet("/rest/endpoint",
        {roles_allowed: ['admin', 'user'], headers: {"content-type": "application/json"}},
        [function ($exchange) {
            return {message: 'Hello World'};
        }])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transaction-support">Transaction Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is now possible to mark a handler as transactional, which means that a new transaction will be started when the method
is invoked. If the method completes without an exception the transaction will be commited, otherwise it will be rolled
back. To use this add transactional: true to the methods options map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$undertow
    .onGet("/rest/endpoint",
        {transactional: true, headers: {"content-type": "application/json"}},
        [function ($exchange) {
            return {message: 'Hello World'};
        }])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="option-map-defaults">Option map defaults</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is now possible to set defaults that will be applied to every that is declared after the option is set (i.e. setting
a default will not affect any previously declared handlers, only new handlers). This can be used to set transaction or
security defaults for all methods, or set a default set of response headers. It is possible to override the defaults
by explicitly specifying the option in the options map.</p>
</div>
<div class="paragraph">
<p>The handler below will behave the same as the transactional one above, however the defaults will be applied to any other
handlers declared after the setDefault call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$undertow
    .setDefault('transactional', true)
    .setDefault('headers' {"content-type": "application/json"})
    .onGet("/rest/endpoint",
        [function ($exchange) {
            return {message: 'Hello World'};
        }])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="freemarker-support">Freemarker support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As well as Mustache.js we now support Freemarker as a template engine. To use Freemarker as the template engine set
<code>template_type: 'freemarker'</code> in the methods options map. If all your templates are Freemarker templates you can use
<code>setDefault('template_type', 'freemarker')</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="going-forward">Going forward</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We would welcome any feedback or suggestions. If you want to contribute, or have any comments head to
<a href="mailto:undertow-dev@lists.jboss.org">undertow-dev@lists.jboss.org</a>.</p>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what youâ€™ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads">Downloads</a></li>
          
            <li><a href="/wildflysitef/docs">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/">Picketbox</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="http://seamframework.org/">Seam</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="http://wildfly-swarm.io/">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/RHLogo_white.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
</body>

</html>