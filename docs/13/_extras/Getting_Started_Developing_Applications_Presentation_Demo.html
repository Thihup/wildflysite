<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
 
    gtag('config', 'UA-125236544-1');
  </script>


</head>

<body class="Getting Started Developing Applications Presentation &amp; Demo">
  <div class="header-banner">
  <p>This site is in beta. Please share feedback by creating an <a href="https://github.com/jbossorg/wildflysite/issues/new" target="_blank">issue ticket</a>.</p>
</div>

  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          
            <a href="/wildflysite/docs/14/" class="active">Docs</a>
          
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="docs-page grid-wrapper">
  <div class="grid__item width-12-12 docs-v-icons">
    <a href="/wildflysite/docs/14/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-14-inactive.png"></a>
    <a href="/wildflysite/docs/13/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-13-active.png"></a>
    <a href="https://docs.wildfly.org/12/" target="_blank"><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-12-inactive.png"></a>
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-11-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-10-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-09-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-08-coming.png">
  </div>
  <div class="grid__item width-12-12"><h1 class="title">Getting Started Developing Applications Presentation &amp; Demo</h1></div>
  <div class="grid__item width-3-12 doc-toc"><ul class="inline_toc">
  <li><a href="#prerequisites-for-using-the-script">Prerequisites for using the script</a></li>
  <li><a href="#import-examples-into-eclipse-and-set-up-jboss-as">Import examples into Eclipse and set up JBoss AS</a></li>
  <li><a href="#the-helloworld-quickstart">The Helloworld Quickstart</a>
    <ul>
      <li><a href="#introduction-1">Introduction</a></li>
      <li><a href="#using-maven">Using Maven</a></li>
      <li><a href="#using-the-command-line-interface-cli">Using the Command Line Interface (CLI)</a></li>
      <li><a href="#using-the-web-management-interface">Using the web management interface</a></li>
      <li><a href="#using-the-filesystem">Using the filesystem</a></li>
      <li><a href="#using-eclipse">Using Eclipse</a></li>
      <li><a href="#digging-into-the-app">Digging into the app</a></li>
    </ul>
  </li>
  <li><a href="#the-numberguess-quickstart">The numberguess quickstart</a>
    <ul>
      <li><a href="#introduction-2">Introduction</a></li>
      <li><a href="#run-the-app">Run the app</a></li>
      <li><a href="#deployment-descriptors-srcmainwebappweb-inf">Deployment descriptors src/main/webapp/WEB-INF</a></li>
      <li><a href="#views">Views</a></li>
      <li><a href="#beans">Beans</a></li>
    </ul>
  </li>
  <li><a href="#the-login-quickstart">The login quickstart</a>
    <ul>
      <li><a href="#introduction-3">Introduction</a></li>
      <li><a href="#run-the-app-1">Run the app</a></li>
      <li><a href="#deployment-descriptors">Deployment Descriptors</a></li>
      <li><a href="#views-1">Views</a></li>
      <li><a href="#beans-1">Beans</a></li>
    </ul>
  </li>
  <li><a href="#the-kitchensink-quickstart">The kitchensink quickstart</a>
    <ul>
      <li><a href="#introduction-4">Introduction</a></li>
      <li><a href="#run-the-app-2">Run the app</a></li>
      <li><a href="#bean-validation">Bean Validation</a></li>
      <li><a href="#jax-rs">JAX-RS</a></li>
      <li><a href="#arquillian">Arquillian</a></li>
    </ul>
  </li>
</ul></div>
  <div class="grid__item width-9-12 doc-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document is a "script" for use with the quickstarts associated with
the <a href="Getting_Started_Developing_Applications_Guide.html">Getting
Started Developing Applications Guide</a>. It can be used as the basis for
demoing/explaining the Java EE 6 programming model with JBoss AS 7.</p>
</div>
<div class="paragraph">
<p>There is an associated presentation – JBoss AS - Getting Started
Developing Applications – which can be used to introduce the Java EE 6
ecosystem.</p>
</div>
<div class="paragraph">
<p>The emphasis here is on the programming model, not on OAM/dev-ops,
performance etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites-for-using-the-script">Prerequisites for using the script</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>JBoss AS 7 downloaded and installed</p>
</li>
<li>
<p>Eclipse Indigo with m2eclipse and JBoss Tools installed</p>
</li>
<li>
<p>The quickstarts downloaded and imported into Eclipse</p>
</li>
<li>
<p>Make sure <code>$JBOSS_HOME</code> is set.</p>
</li>
<li>
<p>Make sure <code>src/test/resources/arquillian.xml</code> has the correct path to
your JBoss AS install for kitchensink</p>
</li>
<li>
<p>Make sure your font size is set in Eclipse so everyone can read the
text!</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="import-examples-into-eclipse-and-set-up-jboss-as">Import examples into Eclipse and set up JBoss AS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-helloworld-quickstart">The Helloworld Quickstart</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction-1">Introduction</h3>
<div class="paragraph">
<p>This quickstart is extremely basic, and is really useful for nothing
more than showing than the app server is working properly, and our
deployment mechanism is working. We recommend you use this quickstart to
demonstrate the various ways you can deploy apps to JBoss AS 7.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-maven">Using Maven</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS 7 from the console</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$JBOSS_HOME/bin/standalone.sh</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploy the app using Maven</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mvn clean package jboss-as:deploy</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The quickstarts use the jboss-as maven plugin to deploy and undeploy
applications. This plugin uses the JBoss AS Native Java Detyped
Management API to communicate with the server. The Detyped API is used
by management tools to control an entire domain of servers, and exposes
only a small number of types, allowing for backwards and forwards
compatibility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Show the app has deployed in the terminal</p>
</div>
<div class="paragraph">
<p>Visit <a href="http://localhost:8080/jboss-as-helloworld" class="bare">http://localhost:8080/jboss-as-helloworld</a></p>
</div>
<div class="paragraph">
<p>Undeploy the app using Maven</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mvn jboss-as:undeploy</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-command-line-interface-cli">Using the Command Line Interface (CLI)</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS 7 from the console (if not already running)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$JBOSS_HOME/bin/standalone.sh</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Build the war</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mvn clean package</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start the CLI</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$JBOSS_HOME/bin/jboss-admin.sh --connect</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The command line also uses the Deptyped Management API to communicate
with the server. It&#8217;s designed to be as "unixy" as possible, allowing
you to "cd" into nodes, with full tab completion etc. The CLI allows you
to deploy and undeploy applications, create JMS queues, topics etc.,
create datasources (normal and XA). It also fully supports the domain
node.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Deploy the app</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">deploy target/jboss-as-helloworld.war</code></pre>
</div>
</div>
<div class="paragraph">
<p>Show the app has deployed</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">undeploy jboss-as-helloworld.war</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-web-management-interface">Using the web management interface</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS 7 from the console (if not already running)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$JBOSS_HOME/bin/standalone.sh</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Build the war</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mvn clean package</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open up the web management interface <a href="http://localhost:9990/console" class="bare">http://localhost:9990/console</a></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The web maangement interface offers the same functionality as the CLI
(and again uses the Detyped Management API), but does so using a pretty
GWT interface! You can set up virtual servers, interrogate sub systems
and more.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Navigate <code>Manage Deployments &#8594; Add content</code>. Click on choose file and
locate <code>helloworld/target/jboss-as-helloworld.war</code>.</p>
</div>
<div class="paragraph">
<p>Click <code>Next</code> and <code>Finish</code> to upload the war to the server.</p>
</div>
<div class="paragraph">
<p>Now click <code>Enable</code> and <code>Ok</code> to start the application</p>
</div>
<div class="paragraph">
<p>Switch to the console to show it deployed</p>
</div>
<div class="paragraph">
<p>Now click <code>Remove</code></p>
</div>
</div>
<div class="sect2">
<h3 id="using-the-filesystem">Using the filesystem</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS 7 from the console (if not already running)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$JBOSS_HOME/bin/standalone.sh</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Build the war</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mvn clean package</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Of course, you can still use the good ol' file system to deploy. Just
copy the file to <code>$JBOSS_HOME/standalone/deployments</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Copy the war</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">cp target/jboss-as-helloworld.war $JBOSS_HOME/standalone/deployments</code></pre>
</div>
</div>
<div class="paragraph">
<p>Show the war deployed</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The filesystem deployment uses marker files to indicate the status of a
deployment. As this deployment succeeded we get a
<code>$JBOSS_HOME/standalone/deployments/jboss-as-helloworld.war.deployed</code>
file. If the deployment failed, you would get a <code>.failed</code> file etc.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Undeploy the war</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">rm $JBOSS_HOME/standalone/deployments/jboss-as-helloworld.war.deployed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Show the deployment stopping!</p>
</div>
<div class="paragraph">
<p>Start and stop the appserver, show that the deployment really is gone!</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This gives you much more precise control over deployments than before
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-eclipse">Using Eclipse</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a JBoss AS server</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Bring up the Server view</p>
</li>
<li>
<p>Right click in it, and choose <code>New &#8594; Server</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Choose JBoss AS 7.0 and hit Next</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Locate the server on your disc</p>
</li>
<li>
<p>Hit Finish</p>
</li>
</ol>
</div>
</li>
<li>
<p>Start JBoss AS in Eclipse</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the server</p>
</li>
<li>
<p>Click the Run button</p>
</li>
<li>
<p>Deploy the app</p>
</li>
</ol>
</div>
</li>
<li>
<p>right click on the app, choose <code>Run As &#8594; Run On Server</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the AS 7 instance you want to use</p>
</li>
<li>
<p>Hit finish</p>
</li>
</ol>
</div>
</li>
<li>
<p>Load the app at <a href="http://localhost:8080/jboss-as-helloworld" class="bare">http://localhost:8080/jboss-as-helloworld</a></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="digging-into-the-app">Digging into the app</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up the helloworld quickstart in Eclipse, and open up
<code>src/main/webapp</code>.</p>
</li>
<li>
<p>Point out that we don&#8217;t require a <code>web.xml</code> anymore!</p>
</li>
<li>
<p>Show <code>beans.xml</code> and explain it&#8217;s a marker file used to JBoss AS to
enable CDI (open it, show that it is empty)</p>
</li>
<li>
<p>Show <code>index.html</code>, and explain it is just used to kick the user into
the app (open it, show the meta-refresh)</p>
</li>
<li>
<p>Open up the <code>pom.xm</code> - and emphasise that it&#8217;s pretty simple.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>There is no parent pom, everything for the build is <strong>here</strong></p>
</li>
<li>
<p>Show that we are enabling the JBoss Maven repo - explain you can do
this in your POM or in system wide ( <code>settings.xml</code>)</p>
</li>
<li>
<p>Show the <code>dependencyManagement</code> section. Here we import the JBoss AS
7 Web Profile API. Explain that this gives you all the versions for all
of the JBoss AS 7 APIs that are in the web profile. Explain we could
also depend on this directly, which would give us the whole set of APIs,
but that here we&#8217;ve decided to go for slightly tighter control and
specify each dependency ourselves</p>
</li>
<li>
<p>Show the import for CDI, JSR-250 and Servlet API. Show that these
are all provided - we are depending on build in server implementations,
not packaging this stuff!</p>
</li>
<li>
<p>Show the plugin sections - nothing that exciting here, the war
plugin is out of date and requires you to provide <code>web.xml</code> <span class="icon yellow">[smile o]</span>
, configure the JBoss AS Maven Plugin, set the Java version to 6.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Open up <code>src/main/java</code> and open up the <code>HelloWorldServlet</code>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Point out the <code>@WebServlet</code> - explain this one annotation removes
about 8 lines of XML - no need to separately map a path either. This is
much more refactor safe</p>
</li>
<li>
<p>Show that we can inject services into a Servlet</p>
</li>
<li>
<p>Show that we use the service (line 41)<br>
#Cmd-click on <code>HelloService</code></p>
</li>
<li>
<p>This is a CDI bean - very simple, no annotations required!</p>
</li>
<li>
<p>Explain injection</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Probably used to string based bean resolution</p>
</li>
<li>
<p>This is typesafe (refactor safe, take advantage of the compiler and
the IDE - we just saw that!)</p>
</li>
<li>
<p>When CDI needs to inject something, the first thing it looks at is
the type - and if the type of the injection point is assignable from a
bean, CDI will inject that bean</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-numberguess-quickstart">The numberguess quickstart</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction-2">Introduction</h3>
<div class="paragraph">
<p>This quickstart adds in a "complete" view layer into the mix. Java EE
ships with a JSF. JSF is a server side rendering, component orientated
framework, where you write markup using an HTML like language, adding in
dynamic behavior by binding components to beans in the back end. The
quickstart also makes more use of CDI to wire the application together.</p>
</div>
</div>
<div class="sect2">
<h3 id="run-the-app">Run the app</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS in Eclipse</p>
</li>
<li>
<p>Deploy it using Eclipse - just right click on the app, choose
<code>Run As &#8594; Run On Server</code></p>
</li>
<li>
<p>Select the AS 7 instance you want to use</p>
</li>
<li>
<p>Hit finish</p>
</li>
<li>
<p>Load the app at <a href="http://localhost:8080/jboss-as-numberguess" class="bare">http://localhost:8080/jboss-as-numberguess</a></p>
</li>
<li>
<p>Make a few guesses</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="deployment-descriptors-srcmainwebappweb-inf">Deployment descriptors src/main/webapp/WEB-INF</h3>
<div class="paragraph">
<p>Emphasize the lack of them!</p>
</div>
<div class="paragraph">
<p>No need to open any of them, just point them out</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>web.xml</code> - don&#8217;t need it!</p>
</li>
<li>
<p><code>beans.xml</code> - as before, marker file</p>
</li>
<li>
<p><code>faces-config.xml</code> - nice feature from AS7 - we can just put
<code>faces-config.xml</code> into the WEB-INF and it enables JSF (inspiration from
CDI)</p>
</li>
<li>
<p><code>pom.xml</code> we saw this before, this time it&#8217;s the same but adds in
JSF API</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="views">Views</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>index.html</code> - same as before, just kicks us into the app</p>
</li>
<li>
<p><code>home.xhtml</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Lines 19 - 25 – these are messages output depending on state of
beans (minimise coupling between controller and view layer by
interrogating state, not pushing)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Line 20 – output any messages pushed out by the controller</p>
</li>
<li>
<p>Line 39 - 42 – the input field is bound to the guess field on the
game bean. We validate the input by calling a method on the game bean.</p>
</li>
<li>
<p>Line 43 - 45 – the command button is used to submit the form, and
calls a method on the game bean</p>
</li>
<li>
<p>Line 48, 49, The reset button again calls a method on the game bean</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="beans">Beans</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Game.java</code> – this is the main controller for the game. App has no
persistence etc.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>@Named</code> – As we discussed CDI is typesafe, (beans are injected by
type) but sometimes need to access in a non-typesafe fashion. @Named
exposes the Bean in EL - and allows us to access it from JSF</p>
</li>
<li>
<p><code>@SessionScoped</code> – really simple app, we keep the game data in the
session - to play two concurrent games, need two sessions. This is not a
limitation of CDI, but simply keeps this demo very simple. CDI will
create a bean instance the first time the game bean is accessed, and
then always load that for you</p>
</li>
<li>
<p><code>@Inject maxNumber</code> – here we inject the maximum number we can
guess. This allows us to externalize the config of the game</p>
</li>
<li>
<p><code>@Inject rnadomNumber</code> – here we inject the random number we need to
guess. Two things to discuss here</p>
</li>
<li>
<p>Instance - normally we can inject the object itself, but sometimes
it&#8217;s useful to inject a "provider" of the object (in this case so that
we can get a new random number when the game is reset!). Instance allows
us to <code>get()</code> a new instance when needed</p>
</li>
<li>
<p>Qualifiers - now we have two types of Integer (CDI auto-boxes types
when doing injection) so we need to disambiguate. Explain qualifiers and
development time approach to disambiguation. You will want to open up
<code>@MaxNumber</code> and <code>@Random</code> here.</p>
</li>
<li>
<p><code>@PostConstruct</code> – here is our reset method - we also call it on
startup to set up initial values. Show use of <code>Instance.get()</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>Generator.java</code> This bean acts as our random number generator.</p>
</li>
<li>
<p><code>@ApplicationScoped</code> explain about other scopes available in CDI<br>
extensibility.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>next()</code> Explain about producers being useful for determining bean
instance at runtime</p>
</li>
<li>
<p><code>getMaxNumber()</code> Explain about producers allowing for loose coupling</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-login-quickstart">The login quickstart</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction-3">Introduction</h3>
<div class="paragraph">
<p>The login quickstart builds on the knowledge of CDI and JSF we have got
from numberguess. New stuff we will learn about is how to use JPA to
store data in a database, how to use JTA to control transactions, and
how to use EJB for declarative TX control.</p>
</div>
</div>
<div class="sect2">
<h3 id="run-the-app-1">Run the app</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS in Eclipse</p>
</li>
<li>
<p>Deploy it using Eclipse - just right click on the app, choose
<code>Run As &#8594; Run On Server</code></p>
</li>
<li>
<p>Select the AS 7 instance you want to use</p>
</li>
<li>
<p>Hit finish</p>
</li>
<li>
<p>Load the app at <a href="http://localhost:8080/jboss-as-login" class="bare">http://localhost:8080/jboss-as-login</a></p>
</li>
<li>
<p>Login as admin/admin</p>
</li>
<li>
<p>Create a new user</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="deployment-descriptors">Deployment Descriptors</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Show that we have the same ones we are used in <code>src/main/webapp</code> –
<code>beans.xml</code>, <code>faces-config.xml</code></p>
</li>
<li>
<p>We have a couple of new ones in <code>src/main/resources</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>persistence.xml</code>. Not too exciting. We are using a datasource that
AS7 ships with. It&#8217;s backed by the H2 database and is purely a sample
datasource to use in sample applications. We also tell Hibernate to
auto-create tables - as you always have.</p>
</li>
<li>
<p><code>import.sql</code> Again, the same old thing you are used to in Hibernate</p>
<div class="ulist">
<ul>
<li>
<p>auto-import data when the app starts.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><code>pom.xml</code> is the same again, but just adds in dependencies for JPA,
JTA and EJB</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="views-1">Views</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>template.xhtml</code> One of the updates added to JSF 2.0 was templating
ability. We take advantage of that in this app, as we have multiple
views</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Actually nothing too major here, we define the app "title" and we
could easily define a common footer etc. (we can see this done in the
kitchensink app)</p>
</li>
<li>
<p>The <code>ui:insert</code> command inserts the actual content from the
templated page.<br>
# <code>home.xhtml</code></p>
</li>
<li>
<p>Uses the template</p>
</li>
<li>
<p>Has some input fields for the login form, button to login and
logout, link to add users.</p>
</li>
<li>
<p>Binds fields to credentials bean}}</p>
</li>
<li>
<p>Buttons link to login bean which is the controller</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>users.xhtml</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Uses the template</p>
</li>
<li>
<p>Displays all users using a table</p>
</li>
<li>
<p>Has a form with input fields to add users.</p>
</li>
<li>
<p>Binds fields to the newUser bean</p>
</li>
<li>
<p>Methods call on userManager bean</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="beans-1">Beans</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Credentials.java</code> Backing bean for the login form field, pretty
trivial. It&#8217;s request scoped (natural for a login field) and named so we
can get it from JSF.</p>
</li>
<li>
<p><code>Login.java</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Is session scoped (a user is logged in for the length of their
session or until they log out}}</p>
</li>
<li>
<p>Is accessible from EL</p>
</li>
<li>
<p>Injects the current credentials</p>
</li>
<li>
<p>Uses the userManager service to load the user, and sends any
messages to JSF as needed</p>
</li>
<li>
<p>Uses a producer method to expose the @LoggedIn user (producer
methods used as we don&#8217;t know which user at development time)</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>User.java</code> Is a pretty straightforward JPA entity. Mapped with
<code>@Entity</code>, has an natural id.</p>
</li>
<li>
<p><code>UserManager.java</code> This is an interface, and by default we use the
ManagedBean version, which requires manual TX control</p>
</li>
<li>
<p><code>ManagedBeanUserManager.java</code> - accessible from EL, request scoped.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Injects a logger (we&#8217;ll see how that is produced in a minute)</p>
</li>
<li>
<p>Injects the entity manager (again, just a min)</p>
</li>
<li>
<p>Inject the UserTransaction (this is provided by CDI)</p>
</li>
<li>
<p><code>getUsers()</code> standard JPA-QL that we know and love - but lots of
ugly TX handling code.</p>
</li>
<li>
<p>Same for <code>addUser()</code> and <code>findUser()</code> methods - very simple JPA
but&#8230;&#8203;</p>
</li>
<li>
<p>Got a couple of producer methods.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><code>getUsers()</code> is obvious - loads all the users in the database. No
ambiguity - CDI takes into account generic types when injecting. Also
note that CDI names respect JavaBean naming conventions</p>
</li>
<li>
<p><code>getNewUser()</code> is used to bind the new user form to from the view
layer - very nice as it decreases coupling - we could completely change
the wiring on the server side (different approach to creating the
newUser bean) and no need to change the view layer.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><code>EJBUserManager.java</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>It&#8217;s an alternative – explain alternatives, and that they allow
selection of beans at deployment time</p>
</li>
<li>
<p>Much simple now we have declarative TX control.</p>
</li>
<li>
<p>Start to see how we can introduce EJB to get useful enterprise
services such as declarative TX control</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>Resources.java</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>{EntityManager}</code> - explain resource producer pattern</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-kitchensink-quickstart">The kitchensink quickstart</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction-4">Introduction</h3>
<div class="paragraph">
<p>The kitchensink quickstart is generated from an archetype available for
JBoss AS (tell people to check the
<a href="/pages/createpage.action?spaceKey=WFLY&amp;title=Getting+Started+Developing+Applications&amp;linkCreation=true&amp;fromPageId=557131">Getting
Started Developing Applications</a> Guide for details). It demonstrates
CDI, JSF, EJB, JPA (which we&#8217;ve seen before) and JAX-RS and Bean
Validation as well. We add in Arquillian for testing.</p>
</div>
</div>
<div class="sect2">
<h3 id="run-the-app-2">Run the app</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start JBoss AS in Eclipse</p>
</li>
<li>
<p>Deploy it using Eclipse - just right click on the app, choose
<code>Run As &#8594; Run On Server</code></p>
</li>
<li>
<p>Select the AS 7 instance you want to use</p>
</li>
<li>
<p>Hit finish</p>
</li>
<li>
<p>Load the app at <a href="http://localhost:8080/jboss-as-kitchensink" class="bare">http://localhost:8080/jboss-as-kitchensink</a></p>
</li>
<li>
<p>Register a member - make sure to enter an invalid email and phone -
show bean validation at work</p>
</li>
<li>
<p>Click on the member URL and show the output from JAX-RS</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="bean-validation">Bean Validation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Explain the benefits of bean validation - need your data always
valid (protect your data) AND good errors for your user. BV allows you
to express once, apply often.</p>
</li>
<li>
<p><code>index.xhtml</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Show the input fields – no validators attached</p>
</li>
<li>
<p>Show the message output</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>Member.java</code></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Hightlight the various validation annotations</p>
</li>
</ol>
</div>
</li>
<li>
<p>Java EE automatically applies the validators in both the persistence
layer and in your views</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="jax-rs">JAX-RS</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>index.xhtml</code> - Show that URL generation is just manual</p>
</li>
<li>
<p><code>JaxRsActivator.java</code> - simply activates JAX-RS</p>
</li>
<li>
<p><code>Member.java</code> - add JAXB annotation to make JAXB process the class properly</p>
</li>
<li>
<p><code>MemberResourceRESTService.java</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>@Path</code> sets the JAX-RS resource</p>
</li>
<li>
<p>JAX-RS services can use injection</p>
</li>
<li>
<p><code>@GET</code> methods are auto transformed to XML using JAXB</p>
</li>
</ol>
</div>
</li>
<li>
<p>And that is it!</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="arquillian">Arquillian</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure JBoss AS is running</p>
</li>
<li>
<p>[source, bash]</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn clean test -Parq-jbossas-remote</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Explain the difference between managed and remote</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Make sure JBoss AS is stopped</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mvn clean test -Parq-jbossas-managed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start JBoss AS in Eclipse</p>
</div>
<div class="paragraph">
<p>Update the project to use the <code>arq-jbossas-remote</code> profile</p>
</div>
<div class="paragraph">
<p>Run the test from Eclipse</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Right click on test, <code>Run As &#8594; JUnit Test</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>MemberRegistrationTest.java</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Discuss micro deployments</p>
</li>
<li>
<p>Explain Arquilian allows you to use injection</p>
</li>
<li>
<p>Explain that Arquillian allows you to concentrate just on your test
logic</p>
</li>
</ol>
</div>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads">Downloads</a></li>
          
            <li><a href="/wildflysitef/docs">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/">Picketbox</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="http://seamframework.org/">Seam</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="http://wildfly-swarm.io/">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/RHLogo_white.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
