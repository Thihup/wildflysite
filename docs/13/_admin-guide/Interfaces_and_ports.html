<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Interfaces and ports | Wildfly</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Interfaces and ports" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Interfaces_and_ports.html" />
<meta property="og:url" content="https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Interfaces_and_ports.html" />
<meta property="og:site_name" content="Wildfly" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Interfaces_and_ports.html","headline":"Interfaces and ports","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/wildflysite/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jbossorg.github.io/wildflysite/feed.xml" title="Wildfly" /></head>
<body><div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          <a href="/wildflysite/docs/" class="">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="sect1">
<h2 id="interface-declarations">Interface declarations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly uses named interface references throughout the configuration. A
network interface is declared by specifying a logical name and a
selection criteria for the physical interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] :read-children-names(child-type=interface)
{
   "outcome" =&gt; "success",
   "result" =&gt; [
       "management",
       "public"
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This means the server in question declares two interfaces: One is
referred to as " <em>management</em>"; the other one " <em>public</em>". The "
<em>management</em>" interface is used for all components and services that are
required by the management layer (i.e. the HTTP Management Endpoint).
The " <em>public</em>" interface binding is used for any application related
network communication (i.e. Web, Messaging, etc). There is nothing
special about these names; interfaces can be declared with any name.
Other sections of the configuration can then reference those interfaces
by their logical name, rather than having to include the full details of
the interface (which, on servers in a management domain, may vary on
different machines).</p>
</div>
<div class="paragraph">
<p>The <code>domain.xml</code>, <code>host.xml</code> and <code>standalone.xml</code> configuration files
all include a section where interfaces can be declared. If we take a
look at the XML declaration it reveals the selection criteria. The
criteria is one of two types: either a single element indicating that
the interface should be bound to a wildcard address, or a set of one or
more characteristics that an interface or address must have in order to
be a valid match. The selection criteria in this example are specific IP
addresses for each interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;interfaces&gt;
  &lt;interface name="management"&gt;
   &lt;inet-address value="127.0.0.1"/&gt;
  &lt;/interface&gt;
  &lt;interface name="public"&gt;
   &lt;inet-address value="127.0.0.1"/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some other examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;interface name="global"&gt;
   &lt;!-- Use the wildcard address --&gt;
   &lt;any-address/&gt;
&lt;/interface&gt;
 
&lt;interface name="external"&gt;
   &lt;nic name="eth0"/&gt;
&lt;/interface&gt;
 
&lt;interface name="default"&gt;
   &lt;!-- Match any interface/address on the right subnet if it's
        up, supports multicast and isn't point-to-point --&gt;
   &lt;subnet-match value="192.168.0.0/16"/&gt;
   &lt;up/&gt;
   &lt;multicast/&gt;
   &lt;not&gt;
      &lt;point-to-point/&gt;
   &lt;/not&gt;
&lt;/interface&gt;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="the-b-command-line-argument">The -b command line argument</h3>
<div class="paragraph">
<p>WildFly supports using the <code>-b</code> command line argument to specify the
address to assign to interfaces. See
<a href="Command_line_parameters.adoc#controlling-the-bind-address">Controlling
the Bind Address with -b</a> for further details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="socket-binding-groups">Socket Binding Groups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The socket configuration in WildFly works similarly to the interfaces
declarations. Sockets are declared using a logical name, by which they
will be referenced throughout the configuration. Socket declarations are
grouped under a certain name. This allows you to easily reference a
particular socket binding group when configuring server groups in a
managed domain. Socket binding groups reference an interface by its
logical name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;socket-binding-group name="standard-sockets" default-interface="public"&gt;
  &lt;socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/&gt;
  &lt;socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9993}"/&gt;
  &lt;socket-binding name="ajp" port="${jboss.ajp.port:8009}"/&gt;
  &lt;socket-binding name="http" port="${jboss.http.port:8080}"/&gt;
  &lt;socket-binding name="https" port="${jboss.https.port:8443}"/&gt;
  &lt;socket-binding name="txn-recovery-environment" port="4712"/&gt;
  &lt;socket-binding name="txn-status-manager" port="4713"/&gt;
&lt;/socket-binding-group&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A socket binding includes the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name&#8201;&#8212;&#8201;logical name of the socket configuration that should be used
elsewhere in the configuration</p>
</li>
<li>
<p>port&#8201;&#8212;&#8201;base port to which a socket based on this configuration should
be bound. (Note that servers can be configured to override this base
value by applying an increment or decrement to all port values.)</p>
</li>
<li>
<p>interface (optional)&#8201;&#8212;&#8201;logical name (see "Interfaces declarations"
above) of the interface to which a socket based on this configuration
should be bound. If not defined, the value of the "default-interface"
attribute from the enclosing socket binding group will be used.</p>
</li>
<li>
<p>multicast-address (optional)&#8201;&#8212;&#8201;if the socket will be used for
multicast, the multicast address to use</p>
</li>
<li>
<p>multicast-port (optional)&#8201;&#8212;&#8201;if the socket will be used for multicast,
the multicast port to use</p>
</li>
<li>
<p>fixed-port (optional, defaults to false)&#8201;&#8212;&#8201;if true, declares that the
value of port should always be used for the socket and should not be
overridden by applying an increment or decrement</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ipv4-versus-ipv6">IPv4 versus IPv6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly supports the use of both IPv4 and IPv6 addresses. By default,
WildFly is configured for use in an IPv4 network and so if you are
running in an IPv4 network, no changes are required. If you need to run
in an IPv6 network, the changes required are minimal and involve
changing the JVM stack and address preferences, and adjusting any
interface IP address values specified in the configuration
(standalone.xml or domain.xml).</p>
</div>
<div class="sect2">
<h3 id="stack-and-address-preference">Stack and address preference</h3>
<div class="paragraph">
<p>The system properties java.net.preferIPv4Stack and
java.net.preferIPv6Addresses are used to configure the JVM for use with
IPv4 or IPv6 addresses. With WildFly, in order to run using IPv4
addresses, you need to specify java.net.preferIPv4Stack=true; in order
to run with IPv6 addresses, you need to specify
java.net.preferIPv4Stack=false (the JVM default) and
java.net.preferIPv6Addresses=true. The latter ensures that any hostname
to IP address conversions always return IPv6 address variants.</p>
</div>
<div class="paragraph">
<p>These system properties are conveniently set by the JAVA_OPTS
environment variable, defined in the standalone.conf (or domain.conf)
file. For example, to change the IP stack preference from its default of
IPv4 to IPv6, edit the standalone.conf (or domain.conf) file and change
its default IPv4 setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS=" ... -Djava.net.preferIPv4Stack=true ..."
...</pre>
</div>
</div>
<div class="paragraph">
<p>to an IPv6 suitable setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS=" ... -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true ..."
...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ip-address-literals">IP address literals</h3>
<div class="paragraph">
<p>To change the IP address literals referenced in standalone.xml (or
domain.xml), first visit the interface declarations and ensure that
valid IPv6 addresses are being used as interface values. For example, to
change the default configuration in which the loopback interface is used
as the primary interface, change from the IPv4 loopback address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;interfaces&gt;
  &lt;interface name="management"&gt;
    &lt;inet-address value="${jboss.bind.address.management:127.0.0.1}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:127.0.0.1}"/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>to the IPv6 loopback address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;interfaces&gt;
  &lt;interface name="management"&gt;
    &lt;inet-address value="${jboss.bind.address.management:[::1]}"/&gt;
  &lt;/interface&gt;
  &lt;interface name="public"&gt;
    &lt;inet-address value="${jboss.bind.address:[::1]}"/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that when embedding IPv6 address literals in the substitution
expression, square brackets surrounding the IP address literal are used
to avoid ambiguity. This follows the convention for the use of IPv6
literals in URLs.</p>
</div>
<div class="paragraph">
<p>Over and above making such changes for the interface definitions, you
should also check the rest of your configuration file and adjust IP
address literals from IPv4 to IPv6 as required.</p>
</div>
</div>
</div>
</div>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/wildflysite/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Wildfly</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wildfly</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wildfly"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wildfly</span></a></li><li><a href="https://www.twitter.com/WildFlyAS"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WildFlyAS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
