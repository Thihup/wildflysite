<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
 
    gtag('config', 'UA-125236544-1');
  </script>


</head>

<body class="add-user utility">
  <div class="header-banner">
  <p>This site is in beta. Please share feedback by creating an <a href="https://github.com/jbossorg/wildflysite/issues/new" target="_blank">issue ticket</a>.</p>
</div>

  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="docs-page grid-wrapper">
  <div class="grid__item width-12-12 docs-v-icons">
    <a href="/wildflysite/docs/14/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-14-inactive.png"></a>
    <a href="/wildflysite/docs/13/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-13-active.png"></a>
    <a href="https://docs.wildfly.org/12/" target="_blank"><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-12-inactive.png"></a>
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-11-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-10-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-09-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-08-coming.png">
  </div>
  <div class="grid__item width-12-12"><h1 class="title">add-user utility</h1></div>
  <div class="grid__item width-3-12 doc-toc"><ul class="inline_toc">
  <li><a href="#adding-a-user">Adding a User</a>
    <ul>
      <li><a href="#a-management-user">A Management User</a>
        <ul>
          <li><a href="#interactive-mode">Interactive Mode</a></li>
          <li><a href="#add-user-non-interactive-mode">Non-Interactive Mode</a></li>
        </ul>
      </li>
      <li><a href="#an-application-user">An Application User</a>
        <ul>
          <li><a href="#interactive-mode-1">Interactive Mode</a></li>
          <li><a href="#non-interactive-mode-1">Non-Interactive Mode</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#updating-a-user">Updating a User</a>
    <ul>
      <li><a href="#a-management-user-1">A Management User</a>
        <ul>
          <li><a href="#interactive-mode-2">Interactive Mode</a></li>
          <li><a href="#non-interactive-mode-2">Non-Interactive Mode</a></li>
        </ul>
      </li>
      <li><a href="#an-application-user-1">An Application User</a>
        <ul>
          <li><a href="#interactive-mode-3">Interactive Mode</a></li>
          <li><a href="#non-interactive-mode">Non-Interactive Mode</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#community-contributions">Community Contributions</a></li>
</ul></div>
  <div class="grid__item width-9-12 doc-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>For use with the default configuration we supply a utility <code>add-user</code>
which can be used to manage the properties files for the default realms
used to store the users and their roles.</p>
</div>
<div class="paragraph">
<p>The add-user utility can be used to manage both the users in the
<code>ManagementRealm</code> and the users in the <code>ApplicationRealm</code>, changes made
apply to the properties file used both for domain mode and standalone
mode.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
After you have installed your application server and decided if you are
going to run in standalone mode or domain mode you can delete the parent
folder for the mode you are not using, the add-user utility will then
only be managing the properties file for the mode in use.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The add-user utility is a command line utility however it can be run in
both interactive and non-interactive mode. Depending on your platform
the script to run the add-user utility is either <code>add-user.sh</code> or
<code>add-user.bat</code> which can be found in \{ <code>jboss.home}/bin</code>.</p>
</div>
<div class="paragraph">
<p>This guide now contains a couple of examples of this utility in use to
accomplish the most common tasks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-a-user">Adding a User</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Adding users to the properties files is the primary purpose of this
utility. Usernames can only contain the following characters in any
number and in any order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alphanumeric characters (a-z, A-Z, 0-9)</p>
</li>
<li>
<p>Dashes (-), periods (.), commas (,), at (@)</p>
</li>
<li>
<p>Escaped backslash ( \\ )</p>
</li>
<li>
<p>Escaped equals (\=)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The server caches the contents of the properties files in memory,
however the server does check the modified time of the properties files
on each authentication request and re-load if the time has been updated
- this means all changes made by this utility are immediately applied to
any running server.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="a-management-user">A Management User</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The default name of the realm for management users is <code>ManagementRealm</code>,
when the utility prompts for the realm name just accept the default
unless you have switched to a different realm.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="interactive-mode">Interactive Mode</h4>
<div class="paragraph">
<p><span class="image"><img src="images/add-mgmt-user-interactive.png" alt="Add mgmt user interactive"></span></p>
</div>
<div class="paragraph">
<p>Here we have added a new Management User called <code>adminUser</code>, as you can
see some of the questions offer default responses so you can just press
enter without repeating the default value.</p>
</div>
<div class="paragraph">
<p>For now just answer <code>n</code> or <code>no</code> to the final question, adding users to
be used by processes is described in more detail in the domain
management chapter.</p>
</div>
</div>
<div class="sect3">
<h4 id="add-user-non-interactive-mode">Non-Interactive Mode</h4>
<div class="paragraph">
<p>To add a user in non-interactive mode the command
<code>./add-user.sh {username} {password</code>} can be used.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/add-mgmt-user-non-interactive.png" alt="add-mgmt-user-non-interactive.png"></span></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If you add users using this approach there is a risk that any other user
that can view the list of running process may see the arguments
including the password of the user being added, there is also the risk
that the username / password combination will be cached in the history
file of the shell you are currently using.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="an-application-user">An Application User</h3>
<div class="paragraph">
<p>When adding application users in addition to adding the user with their
pre-hashed password it is also now possible to define the roles of the
user.</p>
</div>
<div class="sect3">
<h4 id="interactive-mode-1">Interactive Mode</h4>
<div class="paragraph">
<p><span class="image"><img src="images/add-app-user-interactive.png" alt="add-app-user-interactive.png"></span></p>
</div>
<div class="paragraph">
<p>Here a new user called <code>appUser</code> has been added, in this case a comma
separated list of roles has also been specified.</p>
</div>
<div class="paragraph">
<p>As with adding a management user just answer <code>n</code> or <code>no</code> to the final
question until you know you are adding a user that will be establishing
a connection from one server to another.</p>
</div>
</div>
<div class="sect3">
<h4 id="non-interactive-mode-1">Non-Interactive Mode</h4>
<div class="paragraph">
<p>To add an application user non-interactively use the command
<code>./add-user.sh -a {username} {password</code>}.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/add-app-user-non-interactive.png" alt="add-app-user-non-interactive.png"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Non-interactive mode does not support defining a list of users, to
associate a user with a set of roles you will need to manually edit the
<code>application-roles.properties</code> file by hand.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="updating-a-user">Updating a User</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Within the add-user utility it is also possible to update existing
users, in interactive mode you will be prompted to confirm if this is
your intention.</p>
</div>
<div class="sect2">
<h3 id="a-management-user-1">A Management User</h3>
<div class="sect3">
<h4 id="interactive-mode-2">Interactive Mode</h4>
<div class="paragraph">
<p><span class="image"><img src="images/update-mgmt-user-interactive.png" alt="update-mgmt-user-interactive.png"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="non-interactive-mode-2">Non-Interactive Mode</h4>
<div class="paragraph">
<p>In non-interactive mode if a user already exists the update is automatic
with no confirmation prompt.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="an-application-user-1">An Application User</h3>
<div class="sect3">
<h4 id="interactive-mode-3">Interactive Mode</h4>
<div class="paragraph">
<p><span class="image"><img src="images/update-app-user-interactive.png" alt="images/update-app-user-interactive.png"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
On updating a user with roles you will need to re-enter the list of
roles assigned to the user.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="non-interactive-mode">Non-Interactive Mode</h4>
<div class="paragraph">
<p>In non-interactive mode if a user already exists the update is automatic
with no confirmation prompt.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="community-contributions">Community Contributions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are still a few features to add to the add-user utility such as
removing users or adding application users with roles in non-interactive
mode, if you are interested in contributing to WildFly development the
add-user utility is a good place to start as it is a stand alone
utility, however it is a part of the AS build so you can become familiar
with the AS development processes without needing to delve straight into
the internals of the application server.</p>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what youâ€™ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads">Downloads</a></li>
          
            <li><a href="/wildflysitef/docs">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/">Picketbox</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="http://seamframework.org/">Seam</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="http://wildfly-swarm.io/">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
