<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Management Clients | Wildfly</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Management Clients" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Management_Clients.html" />
<meta property="og:url" content="https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Management_Clients.html" />
<meta property="og:site_name" content="Wildfly" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://jbossorg.github.io/wildflysite/docs/13/_admin-guide/Management_Clients.html","headline":"Management Clients","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/wildflysite/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jbossorg.github.io/wildflysite/feed.xml" title="Wildfly" /></head>
<body><div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          <a href="/wildflysite/docs/" class="">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>WildFly offers three different approaches to configure and manage
servers: a web interface, a command line client and a set of XML
configuration files. Regardless of the approach you choose, the
configuration is always synchronized across the different views and
finally persisted to the XML files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-management-interface">Web Management Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The web interface is a GWT application that uses the HTTP management API
to configure a management domain or standalone server.</p>
</div>
<div class="sect2">
<h3 id="http-management-endpoint">HTTP Management Endpoint</h3>
<div class="paragraph">
<p>The HTTP API endpoint is the entry point for management clients that
rely on the HTTP protocol to integrate with the management layer. It
uses a JSON encoded protocol and a de-typed, RPC style API to describe
and execute management operations against a managed domain or standalone
server. It&#8217;s used by the web console, but offers integration
capabilities for a wide range of other clients too.</p>
</div>
<div class="paragraph">
<p>The HTTP API endpoint is co-located with either the domain controller or
a standalone server. By default, it runs on port 9990:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;management-interfaces&gt;
 [...]
 &lt;http-interface security-realm="ManagementRealm"&gt;
  &lt;socket-binding http="management-http"/&gt;
 &lt;/http-interface&gt;
&lt;management-interfaces&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>~(See standalone/configuration/standalone.xml or
domain/configuration/host.xml)~</p>
</div>
<div class="paragraph">
<p>The HTTP API Endpoint serves two different contexts. One for executing
management operations and another one that allows you to access the web
interface:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Domain API: <a href="http://&lt;host&gt;:9990/management" class="bare">http://&lt;host&gt;:9990/management</a></p>
</li>
<li>
<p>Web Console: <a href="http://&lt;host&gt;:9990/console" class="bare">http://&lt;host&gt;:9990/console</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="accessing-the-web-console">Accessing the web console</h3>
<div class="paragraph">
<p>The web console is served through the same port as the HTTP management
API. It can be accessed by pointing your browser to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://&lt;host&gt;:9990/console" class="bare">http://&lt;host&gt;:9990/console</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Default URL</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
By default the web interface can be accessed here:
<a href="http://localhost:9990/console" class="bare">http://localhost:9990/console</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Command_Line_Interface">Command Line Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Command Line Interface (CLI) is a management tool for a managed
domain or standalone server. It allows a user to connect to the domain
controller or a standalone server and execute management operations
available through the de-typed management model.</p>
</div>
<div class="sect2">
<h3 id="running-the-cli">Running the CLI</h3>
<div class="paragraph">
<p>Depending on the operating system, the CLI is launched using
<code>jboss-cli.sh</code> or <code>jboss-cli.bat</code> located in the WildFly <code>bin</code>
directory. For further information on the default directory structure,
please consult the " <a href="Getting_Started_Guide.html">Getting Started
Guide</a>".</p>
</div>
<div class="paragraph">
<p>The first thing to do after the CLI has started is to connect to a
managed WildFly instance. This is done using the command <em>connect</em>, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">./bin/jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server
or 'help' for the list of supported commands.
[disconnected /]
 
[disconnected /] connect
[domain@localhost:9990 /]
 
[domain@localhost:9990 /] quit
Closed connection to localhost:9990</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>localhost:9990</code> is the default host and port combination for the
WildFly CLI client.</p>
</div>
<div class="paragraph">
<p>The host and the port of the server can be provided as an optional
parameter, if the server is not listening on localhost:9990.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">./bin/jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server
[disconnected /] connect 192.168.0.10:9990
Connected to standalone controller at 192.168.0.1:9990</code></pre>
</div>
</div>
<div class="paragraph">
<p>The :9990 is not required as the CLI will use port 9990 by default. The
port needs to be provided if the server is listening on some other port.</p>
</div>
<div class="paragraph">
<p>To terminate the session type <em>quit</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The jboss-cli script accepts a --connect parameter: ./jboss-cli.sh
--connect
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The --controller parameter can be used to specify the host and port of
the server: ./jboss-cli.sh --connect --controller=192.168.0.1:9990</p>
</div>
<div class="paragraph">
<p>Help is also available:</p>
</div>
<div class="paragraph">
<p>In order to list the set of commands that are currently available in the current context
use the option <em>--commands</em> (NB: the following examples are not displaying an
exhaustive set of CLI commands, more and/or different commands could be available
in your running CLI instance):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">[domain@localhost:9990 /] help --commands
Commands available in the current context:
batch               connection-factory  deployment-overlay  if                  patch               reload              try
cd                  connection-info     echo                jdbc-driver-info    pwd                 rollout-plan        undeploy
clear               data-source         echo-dmr            jms-queue           quit                run-batch           unset
command             deploy              help                jms-topic           read-attribute      set                 version
connect             deployment-info     history             ls                  read-operation      shutdown            xa-data-source
To read a description of a specific command execute 'help &lt;command name&gt;'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>help</em> command can print help for any command or operation. For operations,
the operation description is formatted as a command help (synopsis, description and
options). Some commands (eg: <em>patch</em>) expose two levels of documentation. A high
level description for the command itself and a dedicated help content for each action (eg: <em>apply</em>).
The help documentation of each command makes it clear if this two levels are available or not.</p>
</div>
<div class="paragraph">
<p>Use Tab-completion to discover the set of commands and operations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">help &lt;TAB&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The list of all commands (enabled or not) is displayed.</p>
</div>
<div class="paragraph">
<p>Examples</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Display the help of the <em>patch</em> command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">help patch</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Display the help of the <em>apply</em> action of the <em>patch</em> command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">help patch apply</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Display the description of the <em>elytron</em> <em>key-store</em> resource <em>add</em> operation
formatted as a command help content:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">help /subsystem=elytron/key-store=?:add</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cli-keyboard-navigation">Keyboard navigation</h3>
<div class="paragraph">
<p>In order to efficiently edit commands, the CLI allows you to navigate the words
 and characters of a command using the keyboard.</p>
</div>
<div class="paragraph">
<p>NB: Part of this navigation is platform dependent.</p>
</div>
<div class="sect3">
<h4 id="go-left-back-one-word">Go left (back) one word</h4>
<div class="ulist">
<ul>
<li>
<p><em>Alt+B</em> : Linux, Solaris, HP-UX, Windows.</p>
</li>
<li>
<p><em>Ctrl+LeftArrow</em>: Linux, Solaris, HP-UX.</p>
</li>
<li>
<p><em>Alt+LeftArrow</em>: Mac OSX.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="go-right-forward-one-word">Go right (forward) one word</h4>
<div class="ulist">
<ul>
<li>
<p><em>Alt+F</em> : Linux, Solaris, HP-UX, Windows.</p>
</li>
<li>
<p><em>Ctrl+RightArrow</em>: Linux, Solaris, HP-UX.</p>
</li>
<li>
<p><em>Alt+RightArrow</em>: Mac OSX.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="go-to-the-beginning-of-the-line">Go to the beginning of the line</h4>
<div class="ulist">
<ul>
<li>
<p><em>Ctrl+A</em>: All supported platforms.</p>
</li>
<li>
<p><em>HOME</em>:  Linux, Solaris, HP-UX, Windows</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="go-to-the-end-of-the-line">Go to the end of the line</h4>
<div class="ulist">
<ul>
<li>
<p><em>Ctrl+E</em>: All supported platforms.</p>
</li>
<li>
<p><em>END</em>: Linux, Solaris, HP-UX, Windows</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="go-left-back-one-character">Go left (back) one character</h4>
<div class="ulist">
<ul>
<li>
<p><em>Ctrl+B</em> or <em>LeftArrow</em>: All supported platforms.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="go-right-forward-one-character">Go right (forward) one character</h4>
<div class="ulist">
<ul>
<li>
<p><em>Ctrl+F</em> or <em>RightArrow</em>: All supported platforms.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="cli-non-interactive-mode">Non-interactive Mode</h3>
<div class="paragraph">
<p>The CLI can also be run in non-interactive mode to support scripts and
other types of command line or batch processing. The --command and
--commands arguments can be used to pass a command or a list of commands
to execute. Additionally a --file argument is supported which enables
CLI commands to be provided from a text file.</p>
</div>
<div class="paragraph">
<p>For example the following command can be used to list all the current
deployments</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ./bin/jboss-cli.sh --connect --commands=ls\ deployment
sample.war
business.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output can be combined with other shell commands for further
processing, for example to find out what .war files are deployed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ./bin/jboss-cli.sh --connect --commands=ls\ deployment | grep war
sample.war</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to match a command with its output, you can provide the option
--echo-command (or add the XML element &lt;echo-command&gt; to the CLI
configuration file) in order to make the CLI to include the prompt<br>
command + options in the output. With this option enabled, any executed
command will be added to the output.</p>
</div>
</div>
<div class="sect2">
<h3 id="command-timeout">Command timeout</h3>
<div class="paragraph">
<p>By default CLI command and operation executions are not timely bounded.
It means that a command never ending its execution will make the CLI
process to be stuck and unresponsive. To protect the CLI from this
behavior, one can set a command execution timeout.</p>
</div>
<div class="sect3">
<h4 id="command-timeout-behavior">Command Timeout behavior</h4>
<div class="paragraph">
<p>In interactive mode, when a timeout occurs, an error message is
displayed then the console prompt is made available to type new
commands. In non interactive mode (executing a script or a list of
commands), when a timeout occurs, an exception is thrown and the CLI
execution is stopped. In both modes (interactive and non interactive),
when a timeout occurs, the CLI will make a best effort to cancel the
associated server side activities.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring-the-command-timeout">Configuring the Command timeout</h4>
<div class="ulist">
<ul>
<li>
<p>Add the XML element <em>&lt;command-timeout&gt;\{num
seconds}&lt;/command-timeout&gt;</em> to the CLI XML configuration file.</p>
</li>
<li>
<p>Add the option - <em>-command-timeout=\{num seconds}</em> to the CLI command
line. This will override any value set in the XML configuration file.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="managing-the-command-timeout">Managing the Command Timeout</h4>
<div class="paragraph">
<p>Once the CLI is running, the timeout can be adjusted to cope with the
commands to execute. For example a batch command will need a longer
timeout than a non batch one. The command <em>command-timeout</em> allows to
get, set and reset the command timeout.</p>
</div>
</div>
<div class="sect3">
<h4 id="retrieving-the-command-timeout">Retrieving the command timeout</h4>
<div class="paragraph">
<p>The command <em>command-timeout get</em> displays the current timeout in
seconds. A timeout of 0 means no timeout.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">[standalone@localhost:9990 /] command-timeout get
0</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="setting-the-command-timeout">Setting the command timeout</h4>
<div class="paragraph">
<p>The command <em>command-timeout set</em> update the timeout value to a number
of seconds. If a timeout has been set via configuration (XML file or
option), it is overridden by the <em>set</em> action.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">[standalone@localhost:9990 /] command-timeout set 10</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resetting-the-command-timeout">Resetting the command timeout</h4>
<div class="paragraph">
<p>The command <em>command-timeout reset \{config|default}</em> allows to set the
timeout to its configuration value (XML file or option) or default value
(0 second). If no configuration value is set, resetting to the
configuration value sets the timeout to its default value (0 seconds).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">[standalone@localhost:9990 /] command-timeout reset config
[standalone@localhost:9990 /] command-timeout reset default</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="default-native-management-interface-security">Default Native Management Interface Security</h3>
<div class="paragraph">
<p>The native interface shares the same security configuration as the http
interface, however we also support a local authentication mechanism
which means that the CLI can authenticate against the local WildFly
instance without prompting the user for a username and password. This
mechanism only works if the user running the CLI has read access to the
standalone/tmp/auth folder or domain/tmp/auth folder under the
respective WildFly installation - if the local mechanism fails then the
CLI will fallback to prompting for a username and password for a user
configured as in <a href="#Default_HTTP_Interface_Security">Default HTTP Interface Security</a>.</p>
</div>
<div class="paragraph">
<p>Establishing a CLI connection to a remote server will require a username
and password by default.</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-requests">Operation Requests</h3>
<div class="paragraph">
<p>Operation requests allow for low level interaction with the management
model. They are different from the high level commands (i.e.
<em>create-jms-queue</em>) in that they allow you to read and modify the server
configuration as if you were editing the XML configuration files
directly. The configuration is represented as a tree of addressable
resources, where each node in the tree (aka resource) offers a set of
operations to execute.</p>
</div>
<div class="paragraph">
<p>An operation request basically consists of three parts: The <em>address</em>,
an <em>operation name</em> and an optional set of <em>parameters</em>.</p>
</div>
<div class="paragraph">
<p>The formal specification for an operation request is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[/node-type=node-name (/node-type=node-name)*] : operation-name [( [parameter-name=parameter-value (,parameter-name=parameter-value)*] )]</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/subsystem=logging/root-logger=ROOT:change-root-log-level(level=WARN)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tab Completion</p>
</div>
<div class="paragraph">
<p>Tab-completion is supported for all commands and options, i.e.
node-types and node-names, operation names and parameter names.</p>
</div>
<div class="paragraph">
<p>In operation Tab-completion, required parameters have a name terminated by the
'*' character. This helps identify which are the parameters that must be set in order to
construct a valid operation. Furthermore, Tab-completion does not propose
parameters that are alternatives of parameters already present in the operation.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/deployment=myapp:add(&lt;TAB&gt;
!  content*  enabled  runtime-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>The parameter <em>content</em> is required and completion advertises it with a '*' character.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/deployment=myapp:add-content(content=[{&lt;TAB&gt;
bytes*  hash*  input-stream-index*  target-path*  url*</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>bytes</em>, <em>hash</em>, <em>input-stream-index</em> and <em>url</em> are required but also alternatives
(only one of them can be set). As soon as one of these parameter has been set, the
others are no longer proposed by completion.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/deployment=myapp:add-content(content=[{url=myurl,&lt;TAB&gt;
/deployment=myapp:add-content(content=[{url=myurl,target-path</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>target-path</em> argument is automatically inlined in the command.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
We are also considering adding aliases that are less verbose for the user, and
will translate into the corresponding operation requests in the
background.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Whitespaces between the separators in the operation request strings are
not significant.</p>
</div>
<div class="sect3">
<h4 id="addressing-resources">Addressing resources</h4>
<div class="paragraph">
<p>Operation requests might not always have the address part or the
parameters. E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">:read-resource</code></pre>
</div>
</div>
<div class="paragraph">
<p>which will list all the node types for the current node.</p>
</div>
<div class="paragraph">
<p>To syntactically disambiguate between the commands and operations,
operations require one of the following prefixes:</p>
</div>
<div class="paragraph">
<p>To execute an operation against the current node, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">cd subsystem=logging
:read-resource(recursive="true")</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute an operation against a child node of the current node, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd subsystem=logging
./root-logger=ROOT:change-root-log-level(level=WARN)</code></pre>
</div>
</div>
<div class="paragraph">
<p>To execute an operation against the root node, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/:read-resource</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="available-operation-types-and-descriptions">Available Operation Types and Descriptions</h4>
<div class="paragraph">
<p>The operation types can be distinguished between common operations that
exist on any node and specific operations that belong to a particular
configuration resource (i.e. subsystem). The common operations are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add</p>
</li>
<li>
<p>read-attribute</p>
</li>
<li>
<p>read-children-names</p>
</li>
<li>
<p>read-children-resources</p>
</li>
<li>
<p>read-children-types</p>
</li>
<li>
<p>read-operation-description</p>
</li>
<li>
<p>read-operation-names</p>
</li>
<li>
<p>read-resource</p>
</li>
<li>
<p>read-resource-description</p>
</li>
<li>
<p>remove</p>
</li>
<li>
<p>validate-address</p>
</li>
<li>
<p>write-attribute</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a list of specific operations (e.g. operations that relate to the
logging subsystem) you can always query the model itself. For example,
to read the operations supported by the logging subsystem resource on a
standalone server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[[standalone@localhost:9990 /] /subsystem=logging:read-operation-names
{
   "outcome" =&gt; "success",
   "result" =&gt; [
       "add",
       "change-root-log-level",
       "read-attribute",
       "read-children-names",
       "read-children-resources",
       "read-children-types",
       "read-operation-description",
       "read-operation-names",
       "read-resource",
       "read-resource-description",
       "remove-root-logger",
       "root-logger-assign-handler",
       "root-logger-unassign-handler",
       "set-root-logger",
       "validate-address",
       "write-attribute"
   ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the logging resource offers four additional operations,
namely <em>root-logger-assign-handler</em>, <em>root-logger-unassign-handler</em>,
<em>set-root-logger</em> and <em>remove-root-logger</em>.</p>
</div>
<div class="paragraph">
<p>Further documentation about a resource or operation can be retrieved
through the description:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] /subsystem=logging:read-operation-description(name=change-root-log-level)
{
   "outcome" =&gt; "success",
   "result" =&gt; {
       "operation-name" =&gt; "change-root-log-level",
       "description" =&gt; "Change the root logger level.",
       "request-properties" =&gt; {"level" =&gt; {
           "type" =&gt; STRING,
           "description" =&gt; "The log level specifying which message levels will be logged by this logger.
                            Message levels lower than this value will be discarded.",
           "required" =&gt; true
       }}
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full model</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
To see the full model enter <code>:read-resource(recursive=true)</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="command-history">Command History</h3>
<div class="paragraph">
<p>Command (and operation request) history is enabled by default. The
history is kept both in-memory and in a file on the disk, i.e. it is
preserved between command line sessions. The history file name is
.jboss-cli-history and is automatically created in the user&#8217;s home
directory. When the command line interface is launched this file is read
and the in-memory history is initialized with its content.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
While in the command line session, you can use the arrow keys to go back
and forth in the history of commands and operations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To manipulate the history you can use the <em>history</em> command. If executed
without any arguments, it will print all the recorded commands and
operations (up to the configured maximum, which defaults to 500) from
the in-memory history.</p>
</div>
<div class="paragraph">
<p><em>history</em> supports three optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>disable</em> - will disable history expansion (but will not clear the
previously recorded history);</p>
</li>
<li>
<p><em>enabled</em> - will re-enable history expansion (starting from the last
recorded command before the history expansion was disabled);</p>
</li>
<li>
<p><em>clear</em> - will clear the in-memory history (but not the file one).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="json-and-dmr-output">JSON and DMR output</h3>
<div class="paragraph">
<p>By default the CLI prints operation results using the DMR textual syntax. There are
two ways to make the CLI to display JSON:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>--output-json</em> option when launching the CLI.</p>
</li>
<li>
<p><em>&lt;output-json&gt;</em> XML element added to <em>jboss-cli.xml</em> configuration file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="color-output">Color output</h3>
<div class="paragraph">
<p>The CLI outputs results of commands and the prompt in color. To disable this, there are two possible ways to disable it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>--no-color-output</em> will disable color output;</p>
</li>
<li>
<p>Change <em>&lt;enabled&gt;</em> to <code>false</code> in <code>jboss-cli.xml</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>&lt;color-output&gt;</em> block is  used to configure the  colors of the six basic elements that do support it</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Output messages: error, warning and success;</p>
</li>
<li>
<p>Required configuration options when using the auto-complete functionality;</p>
</li>
<li>
<p>The color of the default prompt;</p>
</li>
<li>
<p>The color of the prompt when using <code>batch</code> and any of the workflow commands, <code>if</code>, <code>for</code> and <code>try</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;color-output&gt;
    &lt;enabled&gt;true&lt;/enabled&gt;
    &lt;error-color&gt;red&lt;/error-color&gt;
    &lt;warn-color&gt;yellow&lt;/warn-color&gt;
    &lt;success-color&gt;default&lt;/success-color&gt;
    &lt;required-color&gt;magenta&lt;/required-color&gt;
    &lt;workflow-color&gt;green&lt;/workflow-color&gt;
    &lt;prompt-color&gt;blue&lt;/prompt-color&gt;
&lt;/color-output&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are eight available colors:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Black</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magenta</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cyan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">White</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Green</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yellow</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>There is also the possibility of using the <em>default</em> color, which is the terminal&#8217;s configured foreground color.</p>
</div>
</div>
<div class="sect2">
<h3 id="batch-processing">Batch Processing</h3>
<div class="paragraph">
<p>The batch mode allows one to group commands and operations and execute
them together as an atomic unit. If at least one of the commands or
operations fails, all the other successfully executed commands and
operations in the batch are rolled back.</p>
</div>
<div class="paragraph">
<p>Not all of the commands are allowed in the batch. For example, commands
like <em>cd</em>, <em>ls</em>, <em>help</em>, etc. are not allowed in the batch since they
don&#8217;t translate into operation requests. Only the commands that
translate into operation requests are allowed in the batch. The batch,
actually, is executed as a composite operation request.</p>
</div>
<div class="paragraph">
<p>The batch mode is entered by executing command <em>batch</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[standalone@localhost:9990 /] batch
[standalone@localhost:9990 / #] /subsystem=datasources/data-source="java\:\/H2DS":enable
[standalone@localhost:9990 / #] /subsystem=messaging-activemq/server=default/jms-queue=newQueue:add</pre>
</div>
</div>
<div class="paragraph">
<p>You can execute a batch using the <em>run-batch</em> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 / #] run-batch
The batch executed successfully.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exit the batch edit mode without losing your changes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 / #] holdback-batch
[standalone@localhost:9990 /]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then activate it later on again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] batch
Re-activated batch
#1 /subsystem=datasources/data-source=java:/H2DS:\/H2DS:enable</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are several other notable batch commands available as well (tab
complete to see the list):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>clear-batch</em></p>
</li>
<li>
<p><em>edit-batch-line</em> (e.g. <em>edit-batch line 3 create-jms-topic
name=mytopic</em>)</p>
</li>
<li>
<p><em>remove-batch-line</em> (e.g. <em>remove-batch-line 3</em>)</p>
</li>
<li>
<p><em>move-batch-line</em> (e.g. <em>move-batch-line 3 1</em>)</p>
</li>
<li>
<p><em>discard-batch</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="operators">Operators</h3>
<div class="paragraph">
<p>CLI has some operators that are similar to shell operators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>&gt;</em> To redirect the output of a command/operation to a file:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>:read-resource &gt; my-file.txt</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>&gt;&gt;</em> To redirect the output of a command/operation and append it at the end of a file:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>:read-resource &gt;&gt; my-file.txt</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>|</em> To redirect the output of a command/operation to the <em>grep</em> command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>:read-resource | grep undefined</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Default_HTTP_Interface_Security">Default HTTP Interface Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly is distributed secured by default. The default security
mechanism is username / password based making use of HTTP Digest for the
authentication process.</p>
</div>
<div class="paragraph">
<p>The reason for securing the server by default is so that if the
management interfaces are accidentally exposed on a public IP address
authentication is required to connect - for this reason there is no
default user in the distribution.</p>
</div>
<div class="paragraph">
<p>If you attempt to connect to the admin console before you have added a
user to the server you will be presented with the following screen.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/no-users.png" alt="no-users.png"></span></p>
</div>
<div class="paragraph">
<p>The user are stored in a properties file called mgmt-users.properties
under standalone/configuration and domain/configuration depending on the
running mode of the server, these files contain the users username along
with a pre-prepared hash of the username along with the name of the
realm and the users password.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Although the properties files do not contain the plain text passwords
they should still be guarded as the pre-prepared hashes could be used to
gain access to any server with the same realm if the same user has used
the same password.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To manipulate the files and add users we provide a utility add-user.sh
and add-user.bat to add the users and generate the hashes, to add a user
you should execute the script and follow the guided process.
<span class="image"><img src="/wildflysite/assets/img/posts/images/add-user.png" alt="Add User"></span><br>
The full details of the add-user utility are described later but for the
purpose of accessing the management interface you need to enter the
following values: -</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type of user - This will be a 'Management User' to selection option a.</p>
</li>
<li>
<p>Realm - This MUST match the realm name used in the configuration so
unless you have changed the configuration to use a different realm name
leave this set as 'ManagementRealm'.</p>
</li>
<li>
<p>Username - The username of the user you are adding.</p>
</li>
<li>
<p>Password - The users password.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Provided the validation passes you will then be asked to confirm you
want to add the user and the properties files will be updated.</p>
</div>
<div class="paragraph">
<p>For the final question, as this is a user that is going to be accessing
the admin console just answer 'n' - this option will be described later
for adding slave host controllers that authenticate against a master
domain controller but that is a later topic.</p>
</div>
<div class="paragraph">
<p>Updates to the properties file are picked up in real time so either
click 'Try Again' on the error page that was displayed in the browser or
navigate to the console again and you should then be prompted to enter
the username and password to connect to the server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Default_Native_Interface_Security">Default Native Interface Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The native interface shares the same security configuration as the http
interface, however we also support a local authentication mechanism
which means that the CLI can authenticate against the local WildFly
instance without prompting the user for a username and password. This
mechanism only works if the user running the CLI has read access to the
standalone/tmp/auth folder or domain/tmp/auth folder under the
respective WildFly installation - if the local mechanism fails then the
CLI will fallback to prompting for a username and password for a user
configured as in <a href="#Default-HTTP-Interface-Security">Default HTTP Interface Security</a>.</p>
</div>
<div class="paragraph">
<p>Establishing a CLI connection to a remote server will require a username
and password by default.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-line-interface">Command Line Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Command Line Interface (CLI) is a management tool for a managed
domain or standalone server. It allows a user to connect to the domain
controller or a standalone server and execute management operations
available through the de-typed management model.</p>
</div>
<div class="paragraph">
<p>Details on how to use the CLI can be found in the
<a href="#Command_Line_Interface">Command Line Interface page</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-files">Configuration Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly stores its configuration in centralized XML configuration files,
one per server for standalone servers and, for managed domains, one per
host with an additional domain wide policy controlled by the master
host. These files are meant to be human-readable and human editable.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The XML configuration files act as a central, authoritative source of
configuration. Any configuration changes made via the web interface or
the CLI are persisted back to the XML configuration files. If a domain
or standalone server is offline, the XML configuration files can be hand
edited as well, and any changes will be picked up when the domain or
standalone server is next started. However, users are encouraged to use
the web interface or the CLI in preference to making offline edits to
the configuration files. External changes made to the configuration
files while processes are running will not be detected, and may be
overwritten.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="standalone-server-configuration-file">Standalone Server Configuration File</h3>
<div class="paragraph">
<p>The XML configuration for a standalone server can be found in the
<code>standalone/configuration</code> directory. The default configuration file is
<code>standalone/configuration/standalone.xml</code>.</p>
</div>
<div class="paragraph">
<p>The <code>standalone/configuration</code> directory includes a number of other
standard configuration files, e.g. <code>standalone-full.xml</code>,
<code>standalone-ha.xml</code> and <code>standalone-full-ha.xml</code> each of which is
similar to the default <code>standalone.xml</code> file but includes additional
subsystems not present in the default configuration. If you prefer to
use one of these files as your server configuration, you can specify it
with the <em>[line-through]*c*</em> or <em>-server-config</em> command line argument:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bin/standalone.sh -c=standalone-full.xml</code></p>
</li>
<li>
<p><code>bin/standalone.sh --server-config=standalone-ha.xml</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="managed-domain-configuration-files">Managed Domain Configuration Files</h3>
<div class="paragraph">
<p>In a managed domain, the XML files are found in the
<code>domain/configuration</code> directory. There are two types of configuration
files – one per host, and then a single domain-wide file managed by the
master host, aka the Domain Controller. (For more on the types of
processes in a managed domain, see <a href="#Operating_modes">Operating
Modes</a>.)</p>
</div>
<div class="sect3">
<h4 id="host-specific-configuration-host.xml">Host Specific Configuration – host.xml</h4>
<div class="paragraph">
<p>When you start a managed domain process, a Host Controller instance is
launched, and it parses its own configuration file to determine its own
configuration, how it should integrate with the rest of the domain, any
host-specific values for settings in the domain wide configuration (e.g.
IP addresses) and what servers it should launch. This information is
contained in the host-specific configuration file, the default version
of which is <code>domain/configuration/host.xml</code>.</p>
</div>
<div class="paragraph">
<p>Each host will have its own variant <code>host.xml</code>, with settings
appropriate for its role in the domain. WildFly ships with three
standard variants:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">host-master.xml</th>
<th class="tableblock halign-left valign-top">A configuration that specifies the Host Controller
should become the master, aka the Domain Controller. No servers will be
started by this Host Controller, which is a recommended setup for a
production master.</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host-slave.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A configuration that specifies the Host Controller
should not become master and instead should register with a remote
master and be controlled by it. This configuration launches servers,
although a user will likely wish to modify how many servers are launched
and what server groups they belong to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default host configuration, tailored for an easy out of
the box experience experimenting with a managed domain. This
configuration specifies the Host Controller should become the master,
aka the Domain Controller, but it also launches a couple of servers.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Which host-specific configuration should be used can be controlled via
the _ <em>--host-config_</em> command line argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ bin/domain.sh --host-config=host-master.xml</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="domain-wide-configuration-domain.xml">Domain Wide Configuration – domain.xml</h4>
<div class="paragraph">
<p>Once a Host Controller has processed its host-specific configuration, it
knows whether it is configured to act as the master Domain Controller.
If it is, it must parse the domain wide configuration file, by default
located at <code>domain/configuration/domain.xml</code>. This file contains the
bulk of the settings that should be applied to the servers in the domain
when they are launched – among other things, what subsystems they should
run with what settings, what sockets should be used, and what
deployments should be deployed.</p>
</div>
<div class="paragraph">
<p>Which domain-wide configuration should be used can be controlled via the
_ <em>--domain-config_</em> command line argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ bin/domain.sh --domain-config=domain-production.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>That argument is only relevant for hosts configured to act as the
master.</p>
</div>
<div class="paragraph">
<p>A slave Host Controller does not usually parse the domain wide
configuration file. A slave gets the domain wide configuration from the
remote master Domain Controller when it registers with it. A slave also
will not persist changes to a <code>domain.xml</code> file if one is present on the
filesystem. For that reason it is recommended that no <code>domain.xml</code> be
kept on the filesystem of hosts that will only run as slaves.</p>
</div>
<div class="paragraph">
<p>A slave can be configured to keep a locally persisted copy of the domain
wide configuration and then use it on boot (in case the master is not
available.) See <em>--backup and --cached-dc</em> under
<a href="#Command_line_parameters">Command line parameters</a>.</p>
</div>
</div>
</div>
</div>
</div>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/wildflysite/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Wildfly</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wildfly</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wildfly"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wildfly</span></a></li><li><a href="https://www.twitter.com/WildFlyAS"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WildFlyAS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
