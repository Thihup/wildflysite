<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Java_api_for_restful_web_services_(jax Rs) | Wildfly</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Java_api_for_restful_web_services_(jax Rs)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="[[Java_API_for_RESTful_Web_Services_(JAX-RS)]] = Java API for RESTful Web Services (JAX-RS)" />
<meta property="og:description" content="[[Java_API_for_RESTful_Web_Services_(JAX-RS)]] = Java API for RESTful Web Services (JAX-RS)" />
<link rel="canonical" href="https://jbossorg.github.io/wildflysite/docs/13/_javaee-guide/Java_API_for_RESTful_Web_Services_(JAX-RS).html" />
<meta property="og:url" content="https://jbossorg.github.io/wildflysite/docs/13/_javaee-guide/Java_API_for_RESTful_Web_Services_(JAX-RS).html" />
<meta property="og:site_name" content="Wildfly" />
<script type="application/ld+json">
{"description":"[[Java_API_for_RESTful_Web_Services_(JAX-RS)]] = Java API for RESTful Web Services (JAX-RS)","@type":"WebPage","url":"https://jbossorg.github.io/wildflysite/docs/13/_javaee-guide/Java_API_for_RESTful_Web_Services_(JAX-RS).html","headline":"Java_api_for_restful_web_services_(jax Rs)","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/wildflysite/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jbossorg.github.io/wildflysite/feed.xml" title="Wildfly" /></head>
<body><div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          <a href="/wildflysite/docs/" class="">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="paragraph">
<p>[[Java_API_for_RESTful_Web_Services_(JAX-RS)]]
= Java API for RESTful Web Services (JAX-RS)</p>
</div>
<div class="sect1">
<h2 id="content">Content</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="tutorial-overview">Tutorial Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the Java API for RESTful web services (JAX-RS,
defined in <a href="http://jcp.org/en/jsr/detail?id=311">JSR331</a>).
<a href="http://www.jboss.org/resteasy">RESTEasy</a> is an portable implementation of
this specification which can run in any Servlet container. Tight
integration with JBoss Application Server is available for optimal user
experience in that environment. While JAX-RS is only a server-side
specification, RESTeasy has innovated to bring JAX-RS to the client
through the RESTEasy JAX-RS Client Framework.</p>
</div>
<div class="paragraph">
<p>Detailed documentation on RESTEasy is available
<a href="http://www.jboss.org/resteasy/docs.html">here</a>.<br>
The source for this tutorial is in github repository
<a href="https://github.com/tdiesler/javaee-tutorial">git://github.com/tdiesler/javaee-tutorial.git</a></p>
</div>
<div class="paragraph">
<p><a href="https://openshift.redhat.com/app">OpenShift</a>, is a portfolio of portable
cloud services for deploying and managing applications in the cloud.
This tutorial shows how to deploy a RESTful web service on the free
OpenShift Express JavaEE cartridge that runs
<a href="http://www.jboss.org/jbossas">JBossAS 7</a>.</p>
</div>
<div class="paragraph">
<p>An application running on <a href="http://www.android.com">Android</a> shows how to
leverage JBoss technology on mobile devices. Specifically, we show how
use the RESTEasy client API from an Android device to integrate with a
RESTful service running on a JBossAS 7 instance in the cloud.</p>
</div>
<div class="paragraph">
<p>The following topics are addressed</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What are RESTful web services</p>
</li>
<li>
<p>Creating a RESTful server endpoint</p>
</li>
<li>
<p>Deploying a RESTful endpoint to a JBossAS instance in the cloud</p>
</li>
<li>
<p>RESTEasy client running on an Android mobile device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-are-restful-web-services">What are RESTful Web Services?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Coming Soon</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This section is still under development.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RESTful web services are designed to expose APIs on the web. REST stands
for <strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer. It aims to provide
better performance, scalability, and flexibility than traditinoal web
services, by allowing clients to access data and resources using
predictable URLs. Many well-known public web services expose RESTful
APIs.</p>
</div>
<div class="paragraph">
<p>The Java 6 Enterprise Edition specification for RESTful services is
JAX-RS. It is covered by JSR-311 ( <a href="http://jcp.org/jsr/detail/311.jsp" class="bare">http://jcp.org/jsr/detail/311.jsp</a>).
In the REST model, the server exposes APIs through specific URIs
(typically URLs), and clients access those URIs to query or modify data.
REST uses a stateless communication protocol. Typically, this is HTTP.</p>
</div>
<div class="paragraph">
<p>The following is a summary of RESTful design principles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A URL is tied to a resource using the <code>@Path</code> annotation. Clients
access the resource using the URL.</p>
</li>
<li>
<p>Create, Read, Update, and Delete (CRUD) operations are accessed via
<code>PUT</code>, <code>GET</code>, <code>POST</code>, and <code>DELETE</code> requests in the HTTP protocol.</p>
<div class="ulist">
<ul>
<li>
<p><code>PUT</code> creates a new resource.</p>
</li>
<li>
<p><code>DELETE</code> deletes a resource.</p>
</li>
<li>
<p><code>GET</code> retrieves the current state of a resource.</p>
</li>
<li>
<p><code>POST</code> updates a resources&#8217;s state.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Resources are decoupled from their representation, so that clients can
request the data in a variety of different formats.</p>
</li>
<li>
<p>Stateful interactions require explicit state transfer, in the form of
URL rewriting, cookies, and hidden form fields. State can also be
embedded in response messages.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-restful-endpoint">Creating a RESTful endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A RESTful endpoint is deployed as JavaEE web archive (WAR). For this
tutorial we use a simple library application to manage some books. There
are two classes in this application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Library</p>
</li>
<li>
<p>Book</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Book is a plain old Java object (POJO) with two attributes. This is
a simple Java representation of a RESTful entity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Book {
 
    private String isbn;
    private String title;
 
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Library is the RESTful Root Resource. Here we use a set of standard
JAX-RS annotations to define</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The root path to the library resource</p>
</li>
<li>
<p>The wire representation of the data (MIME type)</p>
</li>
<li>
<p>The Http methods and corresponding paths</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Path("/library")
@Consumes({ "application/json" })
@Produces({ "application/json" })
public class Library {
 
    @GET
    @Path("/books")
    public Collection&lt;Book&gt; getBooks() {
    ...
    }
 
    @GET
    @Path("/book/{isbn}")
    public Book getBook(@PathParam("isbn") String id) {
    ...
    }
 
    @PUT
    @Path("/book/{isbn}")
    public Book addBook(@PathParam("isbn") String id, @QueryParam("title") String title) {
    ...
    }
 
    @POST
    @Path("/book/{isbn}")
    public Book updateBook(@PathParam("isbn") String id, String title) {
    ...
    }
 
    @DELETE
    @Path("/book/{isbn}")
    public Book removeBook(@PathParam("isbn") String id) {
    ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Library root resource uses these JAX-RS annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@Path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifies the URI path that a resource class or class method
will serve requests for</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@Consumes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the media types that the methods of a resource class
can accept</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@Produces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the media type(s) that the methods of a resource
class can produce</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the annotated method responds to HTTP GET requests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the annotated method responds to HTTP PUT requests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the annotated method responds to HTTP POST
requests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">@DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates that the annotated method responds to HTTP DELETE
requests</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For a full description of the available JAX-RS annotations, see the
<a href="http://download.oracle.com/javaee/6/api/javax/ws/rs/package-summary.html">JAX-RS
API</a> documentation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="package-and-build-the-endpoint">Package and build the endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To package the endpoint we create a simple web archive and include a
web.xml with the following content</p>
</div>
<div class="paragraph">
<p>Review</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<a href="https://issues.jboss.org/browse/AS7-1674">AS7-1674</a> Remove or explain why
web.xml is needed for RESTful endpoints
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">&lt;web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;javax.ws.rs.core.Application&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The root context is defined in jboss-web.xml</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">&lt;jboss-web&gt;
  &lt;context-root&gt;jaxrs-sample&lt;/context-root&gt;
&lt;/jboss-web&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code for the JAX-RS part of this tutorial is available on
<a href="https://github.com/tdiesler/javaee-tutorial/tree/master/jaxrs" class="bare">https://github.com/tdiesler/javaee-tutorial/tree/master/jaxrs</a>. In this
step we clone the repository and build the endpoint using
<a href="http://maven.apache.org">maven</a>. There are a number of JAX-RS client
tests that run against a local JBossAS 7 instance. Before we build the
project, we set the JBOSS_HOME environment variable accordingly.</p>
</div>
<div class="paragraph">
<p><a href="http://www.jboss.org/arquillian">Arquillian</a>, the test framework we use
throughout this tutorial, can manage server startup/shutdown. It is
however also possible to startup the server instance manually before you
run the tests. The latter allows you to look at the console and see what
log output the deployment phase and JAX-RS endpoint invocations produce.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ git clone git://github.com/tdiesler/javaee-tutorial.git
Cloning into javaee-tutorial...
 
$ cd javaee-tutorial/jaxrs
$ export JBOSS_HOME=~/workspace/jboss-as-7.0.1.Final
$ mvn install
...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] JavaEE Tutorial - JAX-RS .......................... SUCCESS [1.694s]
[INFO] JavaEE Tutorial - JAX-RS Server ................... SUCCESS [2.392s]
[INFO] JavaEE Tutorial - JAX-RS Client ................... SUCCESS [7.304s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.142s</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy-the-endpoint-to-openshift">Deploy the endpoint to OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First we need to create a free
<a href="https://openshift.redhat.com/app/express">OpenShift Express</a> account and
select the JavaEE cartridge that runs JBossAS 7. Once we have received
the confirmation email from OpenShift we can continue to create our
subdomain and deploy the RESTful endpoint. A series of videos on the
OpenShift Express page shows you how to do this. There is also an
excellent <a href="https://openshift.redhat.com/app/express#quickstart">quick
start document</a> that you have access to after login.</p>
</div>
<div class="paragraph">
<p>For this tutorial we assume you have done the above and that we can
continue by creating the OpenShift application. This step sets up your
JBossAS 7 instance in the cloud. Additionally a <a href="http://git-scm.com">Git</a>
repository is configured that gives access to your deployed application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ rhc-create-app -a tutorial -t jbossas-7.0
Password:
 
Attempting to create remote application space: tutorial
Successfully created application: tutorial
Now your new domain name is being propagated worldwide (this might take a minute)...
 
Success!  Your application is now published here:
 
      http://tutorial-tdiesler.rhcloud.com/
 
The remote repository is located here:
 
    ssh://79dcb9db5e134cccb9d1ba33e6089667@tutorial-tdiesler.rhcloud.com/~/git/tutorial.git/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we can clone the remote Git repository to our local workspace</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ git clone ssh://79dcb9db5e134cccb9d1ba33e6089667@tutorial-tdiesler.rhcloud.com/~/git/tutorial.git
Cloning into tutorial...
remote: Counting objects: 24, done.
remote: Compressing objects: 100% (14/14), done.
remote: Total 24 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (24/24), 21.84 KiB, done.
 
ls -1 tutorial
deployments
pom.xml
README
src</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because we want to deploy an already existing web application, which
we&#8217;ll build in the next step, we can safely remove the source artefacts
from the repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ rm -rf tutorial/src tutorial/pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we copy the JAX-RS endpoint webapp that we build above to the
'deployments' folder and commit the changes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ cp javaee-tutorial/jaxrs/server/target/javaee-tutorial-jaxrs-server-1.0.0-SNAPSHOT.war tutorial/deployments
$ cd tutorial; git commit -a -m "Initial jaxrs endpoint deployment"
[master be5b5a3] Initial jaxrs endpoint deployment
 7 files changed, 0 insertions(+), 672 deletions(-)
 create mode 100644 deployments/javaee-tutorial-jaxrs-server-1.0.0-SNAPSHOT.war
 delete mode 100644 pom.xml
 delete mode 100644 src/main/java/.gitkeep
 delete mode 100644 src/main/resources/.gitkeep
 delete mode 100644 src/main/webapp/WEB-INF/web.xml
 delete mode 100644 src/main/webapp/health.jsp
 delete mode 100644 src/main/webapp/images/jbosscorp_logo.png
 delete mode 100644 src/main/webapp/index.html
 delete mode 100644 src/main/webapp/snoop.jsp
 
$ git push origin
Counting objects: 6, done.
...
remote: Starting application...Done</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now use curl or your browser to see the JAX-RS endpoint in
action. The following URL lists the books that are currently registered
in the library.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ curl http://tutorial-tdiesler.rhcloud.com/jaxrs-sample/library/books
[
{"title":"The Judgment","isbn":"001"},
{"title":"The Stoker","isbn":"002"},
{"title":"Jackals and Arabs","isbn":"003"},
{"title":"The Refusal","isbn":"004"}
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-the-mobile-client">Building the mobile client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The source associated with this tutorial contains a fully working mobile
client application for the Android framework. If not done so already
please follow steps described in
<a href="http://developer.android.com/sdk/installing.html">Installing the SDK</a>. In
addition to the Android SDK, I recommend installing the
<a href="http://m2eclipse.sonatype.org/installing-m2eclipse.html">m2eclipse</a> and
the <a href="http://www.eclipse.org/egit/download/">EGit</a> plugin to
<a href="http://www.eclipse.org/downloads/packages/eclipse-classic-37/indigor">Eclipse</a>.</p>
</div>
<div class="paragraph">
<p>First, go to File|Import&#8230;&#8203; and choose "Existing Maven Projects" to
import the tutorial sources</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/ImportExistingMavenProject.png" alt="images/jaxrs/ImportExistingMavenProject.png"></span></p>
</div>
<div class="paragraph">
<p>You project view should look like this</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/ProjectExplorerA.png" alt="images/jaxrs/ProjectExplorerA.png"></span></p>
</div>
<div class="paragraph">
<p>Then go to File|New|Android Project and fill out the first wizard page
like this</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/NewAndroidProject.png" alt="images/jaxrs/NewAndroidProject.png"></span></p>
</div>
<div class="paragraph">
<p>Click Finish. Next, go to Project|Properties|Build Path|Libraries and
add these external libraries to your android project.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/AndroidLibraries.png" alt="images/jaxrs/AndroidLibraries.png"></span></p>
</div>
<div class="paragraph">
<p>You final project view should look like this</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/ProjectExplorerB.png" alt="images/jaxrs/ProjectExplorerB.png"></span></p>
</div>
<div class="paragraph">
<p>To run the application in the emulator, we need an Android Virtual
Device (AVD). Go to Window|Android SDK and AVD Manager and create a new
AVD like this</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/CreateAVD_.png" alt="images/jaxrs/CreateAVD_.png"></span></p>
</div>
<div class="paragraph">
<p>Now go to Run|Configuration to create a new run configuration for the
client app.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/RunConfiguration.png" alt="images/jaxrs/RunConfiguration.png"></span></p>
</div>
<div class="paragraph">
<p>Now you should be able to launch the application in the debugger. Right
click on the javaee-tutorial-jaxrs-android project and select Debug
As|Android Application. This should launch the emulator, which now goes
though a series of boot screens until it eventually displays the Android
home screen. This will take a minute or two if you do this for the first
time.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/2_2_HVGA_Initial.png" alt="images/jaxrs/2_2_HVGA_Initial.png"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/2_2_HVGA_Next.png" alt="images/jaxrs/2_2_HVGA_Next.png"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/2_2_HVGA_Final.png" alt="images/jaxrs/2_2_HVGA_Final.png"></span></p>
</div>
<div class="paragraph">
<p>When you unlock the home screen by dragging the little green lock to the
right. You should see the the running JAX-RS client application.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/NoBooks.png" alt="images/jaxrs/NoBooks.png"></span></p>
</div>
<div class="paragraph">
<p>Finally, you need to configure the host that the client app connects to.
This would be the same as you used above to curl the library list. In
the emulator click Menu|Host Settings and enter the host address of your
OpenShift application.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/HostSettings.png" alt="images/jaxrs/HostSettings.png"></span></p>
</div>
<div class="paragraph">
<p>When going back to the application using the little back arrow next to
Menu, you should see a list of books.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/wildflysite/assets/img/posts/images/jaxrs/ListOfBooks.png" alt="images/jaxrs/ListOfBooks.png"></span></p>
</div>
<div class="paragraph">
<p>You can now add, edit and delete books and switch between your browser
and the emulator to verify that the client app is not cheating and that
the books are in fact in the cloud on your JBossAS 7 instance.</p>
</div>
<div class="paragraph">
<p>In Eclipse you can go to the Debug perspective and click on the little
Android robot in the lower right corner. This will display the LogCat
view, which should display log output from that Android system as well
as from this client app</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">08-30 09:05:46.180: INFO/JaxrsSample(269): removeBook: Book [isbn=1234, title=1234]
08-30 09:05:46.210: INFO/JaxrsSample(269): requestURI: http://tutorial-tdiesler.rhcloud.com:80/jaxrs-sample/library
08-30 09:05:46.860: INFO/global(269): Default buffer size used in BufferedInputStream constructor. It would be better to be explicit if an 8k buffer is required.
08-30 09:05:46.920: INFO/JaxrsSample(269): getBooks: [Book [isbn=001, title=The Judgment], Book [isbn=002, title=The Stoker], Book [isbn=003, title=Jackals and Arabs], Book [isbn=004, title=The Refusal]]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exploring-the-mobile-client">Exploring the mobile client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is a lot to writing high quality mobile applications. The goal of
this little application is to get you started with JBossAS 7 / Android
integration. There is also a portable approach to writing mobile
applications. A popular one would be through
<a href="http://www.phonegap.com">PhoneGap</a>. With PhoneGap you write your
application in HTML+CSS+Java Script. It then runs in the browser of your
mobile device. Naturally, <a href="http://www.phonegap.com/about/features">not the
full set</a> of mobile platform APIs would be available through this
approach.</p>
</div>
<div class="paragraph">
<p>The JAX-RS client application uses an annotated library client interface</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Consumes({ "application/json" })
@Produces({ "application/json" })
public interface LibraryClient {
 
    @GET
    @Path("/books")
    public List&lt;Book&gt; getBooks();
 
    @GET
    @Path("/book/{isbn}")
    public Book getBook(@PathParam("isbn") String id);
 
    @PUT
    @Path("/book/{isbn}")
    public Book addBook(@PathParam("isbn") String id, @QueryParam("title") String title);
 
    @POST
    @Path("/book/{isbn}")
    public Book updateBook(@PathParam("isbn") String id, String title);
 
    @DELETE
    @Path("/book/{isbn}")
    public Book removeBook(@PathParam("isbn") String id);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two implementations of this interface available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LibraryHttpclient</p>
</li>
<li>
<p>LibraryResteasyClient</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first uses APIs that are available in the Android SDK natively. The
code is much more involved, but there would be no need to add external
libraries (i.e. resteasy, jackson, etc). The effect is that the total
size of the application is considerably smaller in size (i.e. 40k)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @Override
    public List&lt;Book&gt; getBooks() {
        List&lt;Book&gt; result = new ArrayList&lt;Book&gt;();
        String content = get("books");
        Log.d(LOG_TAG, "Result content:" + content);
        if (content != null) {
            try {
                JSONTokener tokener = new JSONTokener(content);
                JSONArray array = (JSONArray) tokener.nextValue();
                for (int i = 0; i &lt; array.length(); i++) {
                    JSONObject obj = array.getJSONObject(i);
                    String title = obj.getString("title");
                    String isbn = obj.getString("isbn");
                    result.add(new Book(isbn, title));
                }
            } catch (JSONException ex) {
                ex.printStackTrace();
            }
        }
        Log.i(LOG_TAG, "getBooks: " + result);
        return result;
    }
 
    private String get(String path) {
        try {
            HttpGet request = new HttpGet(getRequestURI(path));
            HttpResponse res = httpClient.execute(request);
            String content = EntityUtils.toString(res.getEntity());
            return content;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second implementation uses the fabulous RESTEasy client proxy to
interact with the JAX-RS endpoint. The details of Http connectivity and
JSON data binding is transparently handled by RESTEasy. The total size
of the application is considerably bigger in size (i.e. 400k)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @Override
    public List&lt;Book&gt; getBooks() {
        List&lt;Book&gt; result = new ArrayList&lt;Book&gt;();
        try {
            result = getLibraryClient().getBooks();
        } catch (RuntimeException ex) {
            ex.printStackTrace();
        }
        Log.i(LOG_TAG, "getBooks: " + result);
        return result;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Stay tuned for an update on a much more optimized version of the
RESTEasy mobile client. Feasible is also a RESTEasy JavaScript library
that would enable the portable PhoneGap approach.</p>
</div>
</div>
</div>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/wildflysite/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Wildfly</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wildfly</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wildfly"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wildfly</span></a></li><li><a href="https://www.twitter.com/WildFlyAS"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WildFlyAS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
