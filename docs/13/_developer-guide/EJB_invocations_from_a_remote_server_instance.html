<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>EJB invocations from a remote server instance | Wildfly</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="EJB invocations from a remote server instance" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://jbossorg.github.io/wildflysite/docs/13/_developer-guide/EJB_invocations_from_a_remote_server_instance.html" />
<meta property="og:url" content="https://jbossorg.github.io/wildflysite/docs/13/_developer-guide/EJB_invocations_from_a_remote_server_instance.html" />
<meta property="og:site_name" content="Wildfly" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://jbossorg.github.io/wildflysite/docs/13/_developer-guide/EJB_invocations_from_a_remote_server_instance.html","headline":"EJB invocations from a remote server instance","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/wildflysite/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jbossorg.github.io/wildflysite/feed.xml" title="Wildfly" /></head>
<body><div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          <a href="/wildflysite/docs/" class="">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The purpose of this chapter is to demonstrate how to lookup and invoke
on EJBs deployed on an WildFly server instance <strong>from another</strong> WildFly
server instance. This is different from invoking the EJBs
<a href="https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI">from
a remote standalone client</a></p>
</div>
<div class="paragraph">
<p>Let&#8217;s call the server, from which the invocation happens to the EJB, as
"Client Server" and the server on which the bean is deployed as the
"Destination Server".</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Note that this chapter deals with the case where the bean is deployed on
the "Destination Server" but <strong>not</strong> on the "Client Server".
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application-packaging">Application packaging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example, we&#8217;ll consider a EJB which is packaged in a myejb.jar
which is within a myapp.ear. Here&#8217;s how it would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">myapp.ear
|
|---- myejb.jar
|        |
|        |---- &lt;org.myapp.ejb.*&gt; // EJB classes</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Note that packaging itself isn&#8217;t really important in the context of this
article. You can deploy the EJBs in any standard way (.ear, .war or
.jar).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="beans">Beans</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In our example, we&#8217;ll consider a simple stateless session bean which is
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.myapp.ejb;
 
public interface Greeter {
    
    String greet(String user);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.myapp.ejb;
 
import javax.ejb.Remote;
import javax.ejb.Stateless;
 
@Stateless
@Remote (Greeter.class)
public class GreeterBean implements Greeter {
 
    @Override
    public String greet(String user) {
        return "Hello " + user + ", have a pleasant day!";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security">Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WildFly {wildflyVersion} is secure by default. What this means is that no communication
can happen with an WildFly instance from a remote client (irrespective
of whether it is a standalone client or another server instance) without
passing the appropriate credentials. Remember that in this example, our
"client server" will be communicating with the "destination server". So
in order to allow this communication to happen successfully, we&#8217;ll have
to configure user credentials which we will be using during this
communication. So let&#8217;s start with the necessary configurations for
this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-a-user-on-the-destination-server">Configuring a user on the "Destination Server"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a first step we&#8217;ll configure a user on the destination server who
will be allowed to access the destination server. We create the user
using the <code>add-user</code> script that&#8217;s available in the JBOSS_HOME/bin
folder. In this example, we&#8217;ll be configuring a <code>Application User</code> named
<code>ejb</code> and with a password <code>test</code> in the <code>ApplicationRealm</code>. Running the
<code>add-user</code> script is an interactive process and you will see
questions/output as follows:</p>
</div>
<div class="listingblock">
<div class="title">add-user</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">jpai@jpai-laptop:bin$ ./add-user.sh
 
What type of user do you wish to add?
&amp;nbsp;a) Management User (mgmt-users.properties)
&amp;nbsp;b) Application User (application-users.properties)
(a): b
 
Enter the details of the new user to add.
Realm (ApplicationRealm) :
Username : ejb
Password :
Re-enter Password :
What roles do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)\[&amp;nbsp; \]:
About to add user 'ejb' for realm 'ApplicationRealm'
Is this correct yes/no? yes
Added user 'ejb' to file '/jboss-as-7.1.1.Final/standalone/configuration/application-users.properties'
Added user 'ejb' to file '/jboss-as-7.1.1.Final/domain/configuration/application-users.properties'
Added user 'ejb' with roles to file '/jboss-as-7.1.1.Final/standalone/configuration/application-roles.properties'
Added user 'ejb' with roles to file '/jboss-as-7.1.1.Final/domain/configuration/application-roles.properties'</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see in the output above we have now configured a user on the
destination server who&#8217;ll be allowed to access this server. We&#8217;ll use
this user credentials later on in the client server for communicating
with this server. The important bits to remember are the user we have
created in this example is <code>ejb</code> and the password is <code>test.</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Note that you can use any username and password combination you want to.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You do <strong>not</strong> require the server to be started to add a user using the
add-user script.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="start-the-destination-server">Start the "Destination Server"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a next step towards running this example, we&#8217;ll start the
"Destination Server". In this example, we&#8217;ll use the standalone server
and use the <em>standalone-full.xml</em> configuration. The startup command
will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./standalone.sh -server-config=standalone-full.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that the server has started without any errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It&#8217;s very important to note that if you are starting both the server
instances on the same machine, then each of those server instances
<strong>must</strong> have a unique <code>jboss.node.name</code> system property. You can do that
by passing an appropriate value for <code>-Djboss.node.name</code> system property
to the startup script:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./standalone.sh -server-config=standalone-full.xml -Djboss.node.name=&lt;add appropriate value here&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-the-application">Deploying the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application ( <em>myapp.ear</em> in our case) will be deployed to
"Destination Server". The process of deploying the application is out of
scope of this chapter. You can either use the Command Line Interface or
the Admin console or any IDE or manually copy it to
JBOSS_HOME/standalone/deployments folder (for standalone server). Just
ensure that the application has been deployed successfully.</p>
</div>
<div class="paragraph">
<p>So far, we have built a EJB application and deployed it on the
"Destination Server". Now let&#8217;s move to the "Client Server" which acts
as the client for the deployed EJBs on the "Destination Server".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-client-server-to-point-to-the-ejb-remoting-connector-on-the-destination-server">Configuring the "Client Server" to point to the EJB remoting connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>on the "Destination Server"</p>
</div>
<div class="paragraph">
<p>As a first step on the "Client Server", we need to let the server know
about the "Destination Server"'s EJB remoting connector, over which it
can communicate during the EJB invocations. To do that, we&#8217;ll have to
add a " <em>remote-outbound-connection</em>" to the remoting subsystem on the
"Client Server". The " <em>remote-outbound-connection</em>" configuration
indicates that a outbound connection will be created to a remote server
instance from that server. The " <em>remote-outbound-connection</em>" will be
backed by a " <em>outbound-socket-binding</em>" which will point to a remote
host and a remote port (of the "Destination Server"). So let&#8217;s see how
we create these configurations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="start-the-client-server">Start the "Client Server"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example, we&#8217;ll start the "Client Server" on the same machine as
the "Destination Server". We have copied the entire server installation
to a different folder and while starting the "Client Server" we&#8217;ll use a
port-offset (of 100 in this example) to avoid port conflicts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./standalone.sh -server-config=standalone-full.xml -Djboss.socket.binding.port-offset=100</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-security-realm-on-the-client-server">Create a security realm on the client server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remember that we need to communicate with a secure destination server.
In order to do that the client server has to pass the user credentials
to the destination server. Earlier we created a user on the destination
server who&#8217;ll be allowed to communicate with that server. Now on the
"client server" we&#8217;ll create a security-realm which will be used to pass
the user information.</p>
</div>
<div class="paragraph">
<p>In this example we&#8217;ll use a security realm which stores a Base64 encoded
password and then passes on that credentials when asked for. Earlier we
created a user named <code>ejb</code> and password <code>test</code>. So our first task here
would be to create the base64 encoded version of the password <code>test</code>.
You can use any utility which generates you a base64 version for a
string. I used <a href="http://www.base64encode.org/">this online site</a> which
generates the base64 encoded string. So for the <code>test</code> password, the
base64 encoded version is <code>dGVzdA==</code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
While generating the base64 encoded string make sure that you don&#8217;t have
any trailing or leading spaces for the original password. That can lead
to incorrect encoded versions being generated.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
With new versions the add-user script will show the base64 password if
you type 'y' if you&#8217;ve been ask
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Is this new user going to be used for one AS process to connect to another AS process e.g. slave domain controller?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have generated that base64 encoded password, let&#8217;s use in
the in the security realm that we are going to configure on the "client
server". I&#8217;ll first shutdown the client server and edit the
standalone-full.xml file to add the following in the <code>&lt;management&gt;</code>
section</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s create a " <em>security-realm</em>" for the base64 encoded password.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/core-service=management/security-realm=ejb-security-realm:add()
/core-service=management/security-realm=ejb-security-realm/server-identity=secret:add(value=dGVzdA==)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Notice that the CLI show the message <em>"process-state" &#8658;
"reload-required"</em>, so you have to restart the server before you can use
this change.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>upon successful invocation of this command, the following configuration
will be created in the <em>management</em> section:</p>
</div>
<div class="listingblock">
<div class="title">standalone-full.xml</div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;management&gt;
        &lt;security-realms&gt;
            ...
            &lt;security-realm name="ejb-security-realm"&gt;
                &lt;server-identities&gt;
                    &lt;secret value="dGVzdA=="/&gt;
                &lt;/server-identities&gt;
            &lt;/security-realm&gt;
        &lt;/security-realms&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see I have created a security realm named
"ejb-security-realm" (you can name it anything) with the base64 encoded
password. So that completes the security realm configuration for the
client server. Now let&#8217;s move on to the next step.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-outbound-socket-binding-on-the-client-server">Create a outbound-socket-binding on the "Client Server"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s first create a <em>outbound-socket-binding</em> which points the
"Destination Server"'s host and port. We&#8217;ll use the CLI to create this
configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=remote-ejb:add(host=localhost, port=8080)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will create a outbound-socket-binding named "
<em>remote-ejb</em>" (we can name it anything) which points to "localhost" as
the host and port 8080 as the destination port. Note that the host
information should match the host/IP of the "Destination Server" (in
this example we are running on the same machine so we use "localhost")
and the port information should match the http-remoting connector port
used by the EJB subsystem (by default it&#8217;s 8080). When this command is
run successfully, we&#8217;ll see that the standalone-full.xml (the file which
we used to start the server) was updated with the following
outbound-socket-binding in the socket-binding-group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"&gt;
        ...
        &lt;outbound-socket-binding name="remote-ejb"&gt;
            &lt;remote-destination host="localhost" port="8080"/&gt;
        &lt;/outbound-socket-binding&gt;
    &lt;/socket-binding-group&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-remote-outbound-connection-which-uses-this-newly-created-outbound-socket-binding">Create a "remote-outbound-connection" which uses this newly created</h2>
<div class="sectionbody">
<div class="paragraph">
<p>"outbound-socket-binding"</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s create a " <em>remote-outbound-connection</em>" which will use the
newly created outbound-socket-binding (pointing to the EJB remoting
connector of the "Destination Server"). We&#8217;ll continue to use the CLI to
create this configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/subsystem=remoting/remote-outbound-connection=remote-ejb-connection:add(outbound-socket-binding-ref=remote-ejb, protocol=http-remoting, security-realm=ejb-security-realm, username=ejb)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command creates a remote-outbound-connection, named "
<em>remote-ejb-connection</em>" (we can name it anything), in the remoting
subsystem and uses the previously created " <em>remote-ejb</em>"
outbound-socket-binding (notice the outbound-socket-binding-ref in that
command) with the http-remoting protocol. Furthermore, we also set the
security-realm attribute to point to the security-realm that we created
in the previous step. Also notice that we have set the username
attribute to use the user name who is allowed to communicate with the
destination server.</p>
</div>
<div class="paragraph">
<p>What this step does is, it creates a outbound connection, on the client
server, to the remote destination server and sets up the username to the
user who allowed to communicate with that destination server and also
sets up the security-realm to a pre-configured security-realm capable of
passing along the user credentials (in this case the password). This way
when a connection has to be established from the client server to the
destination server, the connection creation logic will have the
necessary security credentials to pass along and setup a successful
secured connection.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s run the following two operations to set some default
connection creation options for the outbound connection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/subsystem=remoting/remote-outbound-connection=remote-ejb-connection/property=SASL_POLICY_NOANONYMOUS:add(value=false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">/subsystem=remoting/remote-outbound-connection=remote-ejb-connection/property=SSL_ENABLED:add(value=false)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ultimately, upon successful invocation of this command, the following
configuration will be created in the remoting subsystem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;subsystem xmlns="urn:jboss:domain:remoting:1.1"&gt;
....
            &lt;outbound-connections&gt;
                &lt;remote-outbound-connection name="remote-ejb-connection" outbound-socket-binding-ref="remote-ejb" protocol="http-remoting" security-realm="ejb-security-realm" username="ejb"&gt;
                    &lt;properties&gt;
                        &lt;property name="SASL_POLICY_NOANONYMOUS" value="false"/&gt;
                        &lt;property name="SSL_ENABLED" value="false"/&gt;
                    &lt;/properties&gt;
                &lt;/remote-outbound-connection&gt;
            &lt;/outbound-connections&gt;
        &lt;/subsystem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>From a server configuration point of view, that&#8217;s all we need on the
"Client Server". Our next step is to deploy an application on the
"Client Server" which will invoke on the bean deployed on the
"Destination Server".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="packaging-the-client-application-on-the-client-server">Packaging the client application on the "Client Server"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Like on the "Destination Server", we&#8217;ll use .ear packaging for the
client application too. But like previously mentioned, that&#8217;s not
mandatory. You can even use a .war or .jar deployments. Here&#8217;s how our
client application packaging will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>client-app.ear
|
|--- META-INF
|        |
|        |--- jboss-ejb-client.xml
|
|--- web.war
|        |
|        |--- WEB-INF/classes
|        |        |
|        |        |---- &lt;org.myapp.FooServlet&gt; // classes in the web app</pre>
</div>
</div>
<div class="paragraph">
<p>In the client application we&#8217;ll use a servlet which invokes on the bean
deployed on the "Destination Server". We can even invoke the bean on the
"Destination Server" from a EJB on the "Client Server". The code remains
the same (JNDI lookup, followed by invocation on the proxy). The
important part to notice in this client application is the file
<em>jboss-ejb-client.xml</em> which is packaged in the META-INF folder of a top
level deployment (in this case our client-app.ear). This
<em>jboss-ejb-client.xml</em> contains the EJB client configurations which will
be used during the EJB invocations for finding the appropriate
destinations (also known as, EJB receivers). The contents of the
jboss-ejb-client.xml are explained next.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If your application is deployed as a top level .war deployment, then the
jboss-ejb-client.xml is expected to be placed in .war/WEB-INF/ folder
(i.e. the same location where you place any web.xml file).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contents-on-jboss-ejb-client.xml">Contents on jboss-ejb-client.xml</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The jboss-ejb-client.xml will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;jboss-ejb-client xmlns="urn:jboss:ejb-client:1.0"&gt;
    &lt;client-context&gt;
        &lt;ejb-receivers&gt;
            &lt;remoting-ejb-receiver outbound-connection-ref="remote-ejb-connection"/&gt;
        &lt;/ejb-receivers&gt;
    &lt;/client-context&gt;
&lt;/jboss-ejb-client&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that we have configured the EJB client context (for this
application) to use a remoting-ejb-receiver which points to our earlier
created " <em>remote-outbound-connection</em>" named "
<em>remote-ejb-connection</em>". This links the EJB client context to use the "
<em>remote-ejb-connection</em>" which ultimately points to the EJB remoting
connector on the "Destination Server".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy-the-client-application">Deploy the client application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s deploy the client application on the "Client Server". The process
of deploying the application is out of scope, of this chapter. You can
use either the CLI or the admin console or a IDE or deploy manually to
JBOSS_HOME/standalone/deployments folder. Just ensure that the
application is deployed successfully.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client-code-invoking-the-bean">Client code invoking the bean</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We mentioned that we&#8217;ll be using a servlet to invoke on the bean, but
the code to invoke the bean isn&#8217;t servlet specific and can be used in
other components (like EJB) too. So let&#8217;s see how it looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import javax.naming.Context;
import java.util.Hashtable;
import javax.naming.InitialContext;
 
...
public void invokeOnBean() {
        try {
            final Hashtable props = new Hashtable();
            // setup the ejb: namespace URL factory
            props.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
            // create the InitialContext
            final Context context = new javax.naming.InitialContext(props);
 
            // Lookup the Greeter bean using the ejb: namespace syntax which is explained here https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI
            final Greeter bean = (Greeter) context.lookup("ejb:" + "myapp" + "/" + "myejb" + "/" + "" + "/" + "GreeterBean" + "!" + org.myapp.ejb.Greeter.class.getName());
 
   // invoke on the bean
   final String greeting = bean.greet("Tom");
 
            System.out.println("Received greeting: " + greeting);
 
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s it! The above code will invoke on the bean deployed on the
"Destination Server" and return the result.</p>
</div>
</div>
</div>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/wildflysite/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Wildfly</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wildfly</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wildfly"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wildfly</span></a></li><li><a href="https://www.twitter.com/WildFlyAS"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WildFlyAS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
