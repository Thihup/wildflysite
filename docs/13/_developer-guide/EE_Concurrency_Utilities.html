<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
 
    gtag('config', 'UA-125236544-1');
  </script>


</head>

<body class="EE Concurrency Utilities">
  <div class="header-banner">
  <p>This site is in beta. Please share feedback by creating an <a href="https://github.com/jbossorg/wildflysite/issues/new" target="_blank">issue ticket</a>.</p>
</div>

  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="docs-page grid-wrapper">
  <div class="grid__item width-12-12 docs-v-icons">
    <a href="/wildflysite/docs/14/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-14-inactive.png"></a>
    <a href="/wildflysite/docs/13/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-13-active.png"></a>
    <a href="https://docs.wildfly.org/12/" target="_blank"><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-12-inactive.png"></a>
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-11-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-10-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-09-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-08-coming.png">
  </div>
  <div class="grid__item width-12-12"><h1 class="title">EE Concurrency Utilities</h1></div>
  <div class="grid__item width-3-12 doc-toc"><ul class="inline_toc">
  <li><a href="#context-service">Context Service</a></li>
  <li><a href="#managed-thread-factory">Managed Thread Factory</a></li>
  <li><a href="#managed-executor-service">Managed Executor Service</a></li>
  <li><a href="#managed-scheduled-executor-service">Managed Scheduled Executor Service</a></li>
</ul></div>
  <div class="grid__item width-9-12 doc-content"><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
EE Concurrency Utilities (JSR 236) is a technology introduced with Java
EE 7, which adapts well known Java SE concurrency utilities to the Java
EE application environment specifics. The Java EE application server is
responsible for the creation (and shutdown) of every instance of the EE
Concurrency Utilities, and provide these to the applications, ready to
use.
</blockquote>
</div>
<div class="paragraph">
<p>The EE Concurrency Utilities support the propagation of the invocation
context, capturing the existent context in the application threads to
use in their own threads, the same way a logged-in user principal is
propagated when a servlet invokes an EJB asynchronously. The propagation
of the invocation context includes, by default, the class loading, JNDI
and security contexts.</p>
</div>
<div class="paragraph">
<p>WildFly creates a single default instance of each EE Concurrency Utility
type in all configurations within the distribution, as mandated by the
specification, but additional instances, perhaps customised to better
serve a specific usage, may be created through WildFly&#8217;s EE Subsystem
Configuration. To learn how to configure EE Concurrency Utilities please
refer to <a href="Admin_Guide.html#EE_Concurrency_Utilities_Configuration">EE Concurrency
Utilities Configuration</a>. Additionally, the EE subsystem configuration
also includes the configuration of which instance should be considered
the default instance mandated by the Java EE specification, and such
configuration is covered by
<a href="Default_EE_Bindings_Configuration.html">Default EE Bindings
Configuration</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="context-service">Context Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Context Service ( <code>javax.enterprise.concurrent.ContextService</code>) is a
brand new concurrency utility, which applications may use to build
contextual proxies from existing objects.</p>
</div>
<div class="paragraph">
<p>A contextual proxy is an object that sets a invocation context, captured
when created, whenever is invoked, before delegating the invocation to
the original object.</p>
</div>
<div class="paragraph">
<p>Usage example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onGet(...) {
  Runnable task = ...;
  Runnable contextualTask = contextService.createContextualProxy(task, Runnable.class);
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>WildFly default configurations creates a single default instance of a
Context Service, which may be retrieved through <code>@Resource</code> injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Resource
private ContextService contextService;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To retrieve instead a non default Context Service instance,
<code>@Resource&#8217;s `lookup</code> attribute needs to specify the JNDI name used in
the wanted instance configuration. WildFly will always inject the
default instance, no matter what&#8217;s the <code>name</code> attribute value, if the
<code>lookup</code> attribute is not defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Applications may alternatively use instead the standard JNDI API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ContextService contextService = InitialContext.doLookup("java:comp/DefaultContextService");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As mandated by the Java EE specification, the default Context Service
instance&#8217;s JNDI name is <code>java:comp/DefaultContextService</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managed-thread-factory">Managed Thread Factory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Managed Thread Factory (
<code>javax.enterprise.concurrent.ManagedThreadFactory</code>) allows Java EE
applications to create Java threads. It is an extension of Java SE&#8217;s
Thread Factory ( <code>java.util.concurrent.ThreadFactory</code>) adapted to the
Java EE platform specifics.</p>
</div>
<div class="paragraph">
<p>Managed Thread Factory instances are managed by the application server,
thus Java EE applications are forbidden to invoke any lifecycle related
method.</p>
</div>
<div class="paragraph">
<p>In case the Managed Thread Factory is configured to use a Context
Service, the application&#8217;s thread context is captured when a thread
creation is requested, and such context is propagated to the thread&#8217;s
Runnable execution.</p>
</div>
<div class="paragraph">
<p>Managed Thread Factory threads implement
<code>javax.enterprise.concurrent.ManageableThread</code>, which allows an
application to learn about termination status.</p>
</div>
<div class="paragraph">
<p>Usage example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onGet(...) {
  Runnable task = ...;
  Thread thread = managedThreadFactory.newThread(task);
  thread.start();
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>WildFly default configurations creates a single default instance of a
Managed Thread Factory, which may be retrieved through <code>@Resource</code>
injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Resource
private ManagedThreadFactory managedThreadFactory;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To retrieve instead a non default Managed Thread Factory instance,
<code>@Resource&#8217;s `lookup</code> attribute needs to specify the JNDI name used in
the wanted instance configuration. WildFly will always inject the
default instance, no matter what&#8217;s the <code>name</code> attribute value, in case
the <code>lookup</code> attribute is not defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Applications may alternatively use instead the standard JNDI API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ManagedThreadFactory managedThreadFactory = InitialContext.doLookup("java:comp/DefaultManagedThreadFactory");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As mandated by the Java EE specification, the default Managed Thread
Factory instance&#8217;s JNDI name is <code>java:comp/DefaultManagedThreadFactory</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managed-executor-service">Managed Executor Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Managed Executor Service (
<code>javax.enterprise.concurrent.ManagedExecutorService</code>) allows Java EE
applications to submit tasks for asynchronous execution. It is an
extension of Java SE&#8217;s Executor Service (
<code>java.util.concurrent.ExecutorService</code>) adapted to the Java EE platform
requirements.</p>
</div>
<div class="paragraph">
<p>Managed Executor Service instances are managed by the application
server, thus Java EE applications are forbidden to invoke any lifecycle
related method.</p>
</div>
<div class="paragraph">
<p>In case the Managed Executor Service is configured to use a Context
Service, the application&#8217;s thread context is captured when the task is
submitted, and propagated to the executor thread responsible for the
task execution.</p>
</div>
<div class="paragraph">
<p>Usage example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onGet(...) {
    Runnable task = ...;
    Future future = managedExecutorService.submit(task);
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>WildFly default configurations creates a single default instance of a
Managed Executor Service, which may be retrieved through <code>@Resource</code>
injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Resource
private ManagedExecutorService managedExecutorService;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To retrieve instead a non default Managed Executor Service instance,
<code>@Resource&#8217;s `lookup</code> attribute needs to specify the JNDI name used in
the wanted instance configuration. WildFly will always inject the
default instance, no matter what&#8217;s the <code>name</code> attribute value, in case
the <code>lookup</code> attribute is not defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Applications may alternatively use instead the standard JNDI API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ManagedExecutorService managedExecutorService = InitialContext.doLookup("java:comp/DefaultManagedExecutorService");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As mandated by the Java EE specification, the default Managed Executor
Service instance&#8217;s JNDI name is
<code>java:comp/DefaultManagedExecutorService</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managed-scheduled-executor-service">Managed Scheduled Executor Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Managed Scheduled Executor Service (
<code>javax.enterprise.concurrent.ManagedScheduledExecutorService</code>) allows
Java EE applications to schedule tasks for asynchronous execution. It is
an extension of Java SE&#8217;s Executor Service (
<code>java.util.concurrent.ScheduledExecutorService</code>) adapted to the Java EE
platform requirements.</p>
</div>
<div class="paragraph">
<p>Managed Scheduled Executor Service instances are managed by the
application server, thus Java EE applications are forbidden to invoke
any lifecycle related method.</p>
</div>
<div class="paragraph">
<p>In case the Managed Scheduled Executor Service is configured to use a
Context Service, the application&#8217;s thread context is captured when the
task is scheduled, and propagated to the executor thread responsible for
the task execution.</p>
</div>
<div class="paragraph">
<p>Usage example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public void onGet(...) {
    Runnable task = ...;
    ScheduledFuture future = managedScheduledExecutorService.schedule(task, 60, TimeUnit.SECONDS);
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>WildFly default configurations creates a single default instance of a
Managed Scheduled Executor Service, which may be retrieved through
<code>@Resource</code> injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Resource
private ManagedScheduledExecutorService managedScheduledExecutorService;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To retrieve instead a non default Managed Scheduled Executor Service
instance, <code>@Resource&#8217;s `lookup</code> attribute needs to specify the JNDI
name used in the wanted instance configuration. WildFly will always
inject the default instance, no matter what&#8217;s the <code>name</code> attribute
value, in case the <code>lookup</code> attribute is not defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Applications may alternatively use instead the standard JNDI API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ManagedScheduledExecutorService managedScheduledExecutorService = InitialContext.doLookup("java:comp/DefaultManagedScheduledExecutorService");</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As mandated by the Java EE specification, the default Managed Scheduled
Executor Service instance&#8217;s JNDI name is
<code>java:comp/DefaultManagedScheduledExecutorService</code>.
</td>
</tr>
</table>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what youâ€™ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads">Downloads</a></li>
          
            <li><a href="/wildflysitef/docs">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/">Picketbox</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="http://seamframework.org/">Seam</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="http://wildfly-swarm.io/">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
