<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>&lt;authentication-client /&gt; - WildFly Elytron | Wildfly</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="&lt;authentication-client /&gt; - WildFly Elytron" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://jbossorg.github.io/wildflysite/docs/13/_client-guide/authentication-client.html" />
<meta property="og:url" content="https://jbossorg.github.io/wildflysite/docs/13/_client-guide/authentication-client.html" />
<meta property="og:site_name" content="Wildfly" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://jbossorg.github.io/wildflysite/docs/13/_client-guide/authentication-client.html","headline":"&lt;authentication-client /&gt; - WildFly Elytron","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/wildflysite/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://jbossorg.github.io/wildflysite/feed.xml" title="Wildfly" /></head>
<body><div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          <a href="/wildflysite/docs/" class="">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <em>&lt;authentication-client/&gt;</em> element can be added to the wildfly-config.xml configuration to define configuration in relation to authentication configuration for outbound connections and SSL configuration for outbound connections e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
       ...
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Note: A single wildfly-config.xml could be used by multiple projects using multiple versions of Wildfly Elytron, newer versions of WildFly Elytron will introduce new configuration using later namespace versions however they will still continue to support the previously released schemas until advertised otherwise.  For the configuration to be compatible with this either use a schema and namespace compatible with all the versions in use, or multiple authentication-client elements can be added, these should be added ordered by namespace youngest to oldest.  If a configuration with a later namespace is discovered by a newer WildFly Elytron client it will be used and parsing will not look for an older version as well.</em></p>
</div>
<div class="paragraph">
<p>The <em>&lt;authentication-client /&gt;</em> configuration can contain the following sections: -</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;credential-stores /&gt;</dt>
<dd>
<p>Definitions of credential stores to be referenced from elsewhere in the configuration.</p>
</dd>
<dt class="hdlist1">&lt;key-stores /&gt;</dt>
<dd>
<p>Definitions of KeyStores to be referenced elsewhere in the configuration.</p>
</dd>
<dt class="hdlist1">&lt;authentication-rules /&gt;</dt>
<dd>
<p>Rules to be applied for outbound connections to match against an appropriate authentication configuration.</p>
</dd>
<dt class="hdlist1">&lt;authentication-configurations /&gt;</dt>
<dd>
<p>The individual authentication configurations that will be matched by the authentication rules.</p>
</dd>
<dt class="hdlist1">&lt;net-authenticator /&gt;</dt>
<dd>
<p>Flag to enable integration with the [java.net.Authenticator|https://docs.oracle.com/javase/8/docs/api/java/net/Authenticator.html].</p>
</dd>
<dt class="hdlist1">&lt;ssl-context-rules /&gt;</dt>
<dd>
<p>Rules to be applied for outbound connections to match against an appropriate SSL context configuration.</p>
</dd>
<dt class="hdlist1">&lt;ssl-contexts /&gt;</dt>
<dd>
<p>Individual SSL context definitions that will be matched by the ssl context rules.</p>
</dd>
<dt class="hdlist1">&lt;providers/&gt;</dt>
<dd>
<p>Definition of how [java.security.Provider|https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html] instances will be discovered.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="credential-stores">&lt;credential-stores /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The &lt;credential-stores /&gt;  element can be used to define individual named credential stores that can subsequently be used elsewhere in the configuration to reference stored credentials as an alternative to the credentials being embedded in the configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;credential-stores&gt;
            &lt;credential-store name="..." type="..." provider="..." &gt;
                &lt;attributes&gt;
                    &lt;attribute name="..." value="..." /&gt;
                &lt;/attributes&gt;
                &lt;protection-parameter-credentials&gt;...&lt;/protection-parameter-credentials&gt;
            &lt;/credential-store&gt;
        &lt;/credential-stores&gt;
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the name an individual &lt;credential-store /&gt; definition can contain the following optional attributes: -</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">type</dt>
<dd>
<p>The type of the credential store, e.g.KeyStoreCredentialStore.</p>
</dd>
<dt class="hdlist1">provider</dt>
<dd>
<p>The name of the [java.security.Provider|https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html] to use to load the credential store.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following child elements can also be added to configure the credential store.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;attributes .&gt;</dt>
<dd>
<p>Definition of configuration attributes used to initialise the credential store.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;attributes&gt;
    &lt;attribute name="..." value="..." /&gt;
&lt;/attributes&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The &lt;attribute/&gt; element can be repeated as many times as is required for the configuration.</p>
</div>
<div id="client-credentials-type" class="dlist">
<dl>
<dt class="hdlist1">&lt;protection-parameter-credentials /&gt;</dt>
<dd>
<p>One or more credentials to be assembled into a protection parameter when initialising the credential store.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The &lt;protection-paramter-credentials /&gt; element can contain one more more child elements, which of these are actually supported will depend on the credential store implementation: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;protection-parameter-credentials&gt;
    &lt;key-store-reference&gt;...&lt;/key-store-reference&gt;
    &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
    &lt;clear-password password="..." /&gt;
    &lt;key-pair public-key-pem="..." private-key-pem="..." /&gt;
    &lt;certificate private-key-pem="..." pem="..." /&gt;
    &lt;public-key-pem&gt;...&lt;/public-key-pem&gt;
    &lt;bearer-token value="..." /&gt;
    &lt;oauth2-bearer-token token-endpoint-uri="..."&gt;...&lt;/oauth2-bearer-token&gt;
&lt;/protection-parameter-credentials&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The potential child elements of &lt;protection-parameter-credentials /&gt; are: -</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;key-store-reference&gt;</dt>
<dd>
<p>Defines a reference to an entry within a KeyStore for an entry to use.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The overall structure of this element is: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;key-store-reference key-store-name="..." alias="..."&gt;
   &lt;key-store-clear-password password="..." /&gt;
   &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
   &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-reference&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This structure is identical to the structure use in [&lt;key-store-credential /&gt;|#key-store-credential].</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;credential-store-reference store="&#8230;&#8203;" alias="&#8230;&#8203;" clear-text="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Reference to a credential stored in a credential store.</p>
</dd>
<dt class="hdlist1">&lt;clear-password password="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A password specified in the clear.</p>
</dd>
<dt class="hdlist1">&lt;key-pair public-key-pem="&#8230;&#8203;" private-key-pem="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A public and private key pair.</p>
</dd>
<dt class="hdlist1">* &lt;certificate private-key-pem="&#8230;&#8203;" pem="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A pem encoded private key and corresponding certificate.</p>
</dd>
<dt class="hdlist1">&lt;public-key-pem&gt;&#8230;&#8203;&lt;/public-key-pem&gt;</dt>
<dd>
<p>A pem encoded public key.</p>
</dd>
<dt class="hdlist1">* &lt;bearer-token value="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A bearer token</p>
</dd>
<dt class="hdlist1">&lt;oauth2-bearer-token&gt;&#8230;&#8203;&lt;/oauth2-bearer-token&gt;</dt>
<dd>
<p>An oath2 bearer token.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The full structure of this element is: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;oauth2-bearer-token token-endpoint-uri="..."&gt;
    &lt;client-credentials client-id="..." client-secret="..." /&gt;
    &lt;resource-owner-credentials name="..." password="..." /&gt;
&lt;/oauth2-bearer-token&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="key-stores">&lt;key-stores /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The &lt;key-stores /&gt; element can be used to define individual key-store definitions that can subsequently be referenced from alternative locations within the configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;key-stores&gt;
            &lt;key-store name="..."&gt;
               &lt;!-- One of the following to specify where to load the KeyStore from. --&gt;
               &lt;file-name name="..." /&gt;
               &lt;load-from uri-"..." /&gt;
               &lt;resource name="..." /&gt;
               &lt;!-- One of the following to specify the protection parameter to unlock the KeyStore. --&gt;
               &lt;key-store-clear-password password="..." /&gt;
               &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
            &lt;/key-store&gt;
        &lt;/key-stores&gt;
       ...
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An individual &lt;key-store /&gt; definition must contain exactly one of the following elements to define where to load the store from.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;file name="&#8230;&#8203;" /&gt;*</dt>
<dd>
<p>Load from file where 'name' is the name of the file.</p>
</dd>
<dt class="hdlist1">&lt;load-from uri="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Load the file from the URI specified.</p>
</dd>
<dt class="hdlist1">&lt;resource name="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Load as a resource from the Thread context classloader where 'name' is the name of the resource to load.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Exactly one of the following elements must also be present to specify the protection parameter for initialisation of the KeyStore.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">key-store-clear-password password="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A password specified in the clear.</p>
</dd>
<dt class="hdlist1">&lt;key-store-credential&gt;&#8230;&#8203;&lt;/key-store-credential&gt;</dt>
<dd>
<p>A reference to another KeyStore to obtain an Entry to use as the protection parameter to access this KeyStore.</p>
</dd>
</dl>
</div>
<div id="key-store-credential" class="paragraph">
<p>The structure of the &lt;key-store-credential /&gt; element is.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;key-store-credential key-store-name="..." alias="..."&gt;
   &lt;key-store-clear-password password="..." /&gt;
   &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
   &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-credential&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This element contains two attributes: -</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">key-store-name</dt>
<dd>
<p><em>(Mandatory)</em> - Name of the KeyStore being referenced to load the entry from.</p>
</dd>
<dt class="hdlist1">alias</dt>
<dd>
<p><em>(Optional)</em> - The alias of the entry to load from the referenced KeyStore, this can only be omitted for KeyStores that contain only a single entry.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Java KeyStores also make use of a protection parameter when accessing a single entry in addition to the protection parameter to load the KeyStore, exactly one of the following elements must be present to specify the protection parameter of the entry being loaded.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;key-store-clear-password password="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A password specified in the clear.</p>
</dd>
<dt class="hdlist1">&lt;credential-store-reference store="&#8230;&#8203;" alias="&#8230;&#8203;" clear-text="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Reference to a credential stored in a credential store.</p>
</dd>
<dt class="hdlist1">&lt;key-store-credential&gt;&#8230;&#8203;&lt;/key-store-credential&gt;</dt>
<dd>
<p>A reference to another KeyStore to obtain an Entry to use as the protection parameter to access the alias.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The &lt;key-store-credential /&gt; is exactly the same, this means theoretically a chain of references could be used to lead to the unlocking of the required alias.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Rules">&lt;authentication-rules /&gt; and &lt;ssl-context-rules /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When either an authentication-configuration or an ssl-context is required the URI of the resources being accessed as well as an optional abstract type and abstract type authority and matched against the rules defined in the configuration to identify which authentication-configuration or ssl-context should be used.</p>
</div>
<div class="paragraph">
<p>The rules to match &lt;authentication-configuration /&gt; instances are defined within the &lt;authentication-rules /&gt; element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;authentication-rules&gt;
            &lt;rule use-configuration="..."&gt;
                ...
            &lt;/rule&gt;
        &lt;/authentication-rules&gt;
       ...
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rules to match against the &lt;ssl-context /&gt; definitions are contains within the &lt;ssl-context-rules /&gt; element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;ssl-context-rules&gt;
            &lt;rule use-ssl-context="..."&gt;
                ...
            &lt;/rule&gt;
        &lt;/ssl-context-rules&gt;
       ...
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Overall this means that authentication configuration matching is independent of SSLContext matching.  By separating the rules from the configurations is means multiple rules can be defined that match against the same configuration.</p>
</div>
<div class="paragraph">
<p>The rules applied so first match wins and not most specific match wins, to achieve a most specific match wins configuration place the most specific rules at the beginning leaving the more general matches towards the end.</p>
</div>
<div class="paragraph">
<p>For both the &lt;authentication-rules /&gt;  and the &lt;ssl-context-rules /&gt; the structure of the rules is identical other than one references an authentication configuration and the other references an SSLContext.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;rule use-configuration|use-ssl-context="..."&gt;
    &lt;!-- At most one of the following two can be defined. --&gt;
    &lt;match-no-user /&gt;
    &lt;match-user name="..." /&gt;
    &lt;!-- Each of the following can be defined at most once. --&gt;
    &lt;match-protocol name="..." /&gt;
    &lt;match-host name="..." /&gt;
    &lt;match-path name="..." /&gt;
    &lt;match-port number="..." /&gt;
    &lt;match-urn name="..." /&gt;
    &lt;match-domain name="..." /&gt;
    &lt;match-abstract-type name="..." authority="..." /&gt;
&lt;/rule&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where multiple matches are defined within a rule they must all match for the rule to apply.  If a rule is defined with no match elements then it becomes a match all rule and will match anything, these can be useful at the end of the configuration to ensure something matches.</p>
</div>
<div class="paragraph">
<p>The individual match elements are: -</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;match-no-user /&gt;</dt>
<dd>
<p>user-info can be embedded within a URI, this rule matches when there is no user-info.
&lt;match-user name="&#8230;&#8203;" /&gt; - Matches when the user-info embedded in the URI matches the name specified within this element.
&lt;match-protocol name="&#8230;&#8203;" /&gt; - Matches the protocol within the URI against the name specified in this match element.
&lt;match-host-name name="&#8230;&#8203;" /&gt; - Matches the host name from within the URI against the name specified in this match element.
&lt;match-path name="&#8230;&#8203;" /&gt; - Matches the path from the URI against the name specified in this match element.
&lt;match-port number="&#8230;&#8203;" /&gt; - Matches the port number specified within the URI against the number in this match element.  This only matches against the number specified within the URI and not against any default derrived from the protocol.
&lt;match-urn name="&#8230;&#8203;" /&gt;" - Matches the scheme specific part of the URI against the name specified within this element.</p>
</dd>
<dt class="hdlist1">* &lt;match-domain-name name="&#8230;&#8203;"/&gt;</dt>
<dd>
<p>Matches where the protocol of the URI is 'domain' and the scheme specific part of the URI is the name specified within this match element.</p>
</dd>
<dt class="hdlist1">&lt;match-abstract-type name="&#8230;&#8203;" authority="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Matches the abstract type and/or authority against the values specified within this match element.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication-configurations">&lt;authentication-configurations /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The &lt;authentication-configurations /&gt; element contains named configurations that can then be matched from the &lt;authentication-rules /&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;authentication-configurations&gt;
            &lt;configuration name="..."&gt;
                &lt;!-- Destination Overrides. --&gt;
                &lt;set-host name="..." /&gt;
                &lt;set-port number="..." /&gt;
                &lt;set-protocol name="..." /&gt;
                &lt;!-- At most one of the following two elements. --&gt;
                &lt;set-user-name name="..." /&gt;
                &lt;set-anonymous /&gt;
                &lt;set-mechanism-realm name="..." /&gt;
                &lt;rewrite-user-name-regex pattern="..." replacement="..." /&gt;
                &lt;sasl-mechanism-selector selector="..." /&gt;
                &lt;set-mechanism-properties&gt;
                   &lt;property key="..." value="..." /&gt;
                &lt;/set-mechanism-properties&gt;
                &lt;credentials&gt;...&lt;/credentials&gt;
                &lt;set-authorization-name name="..." /&gt;
                &lt;providers&gt;...&lt;/providers&gt;
                &lt;!-- At most one of the following two elements. --&gt;
                &lt;use-provider-sasl-factory /&gt;
                &lt;use-service-loader-sasl-factory module-name="..." /&gt;
            &lt;/configuration&gt;
        &lt;/authentication-configurations&gt;
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The elements within the &lt;configuration /&gt; element provide the following features: -</p>
</div>
<div class="paragraph">
<p>The first three elements override the destination.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;set-host-name name="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Override the host name for the authenticated call.</p>
</dd>
<dt class="hdlist1">&lt;set-port-number number="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Override the port number for the authenticated call.</p>
</dd>
<dt class="hdlist1">&lt;set-protocol name="&#8230;&#8203;"/&gt;</dt>
<dd>
<p>Override the protocol for the authenticated call.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The next two are mutually exclusive and can be used to set the name for authentication or switch to anonymous authentication.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;set-user-name name="&#8230;&#8203;"/&gt;</dt>
<dd>
<p>Set the user name to use for authentication.</p>
</dd>
<dt class="hdlist1">&lt;set-anonymous /&gt;</dt>
<dd>
<p>Switch to anonymous authentication.</p>
</dd>
<dt class="hdlist1">&lt;set-mechanism-realm-name name="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Specify the name of the realm that will be selected by the SASL mechanism if required.</p>
</dd>
<dt class="hdlist1">&lt;rewrite-user-name-regex pattern="&#8230;&#8203;" replacement="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A regular expression pattern and replacement to re-write the user name used for authentication.</p>
</dd>
<dt class="hdlist1">&lt;sasl-mechanism-selector selector="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>A SASL mechanism selector using the syntax from [org.wildfly.security.sasl.SaslMechanismSelector,fromString()|https://github.com/wildfly-security/wildfly-elytron/blob/1.1.4.Final/src/main/java/org/wildfly/security/sasl/SaslMechanismSelector.java#L544]</p>
</dd>
<dt class="hdlist1">&lt;set-mechanism-properties&gt;&#8230;&#8203;&lt;/set-mechanism-properties&gt;</dt>
<dd>
<p>One or more properties defined as &lt;property key="&#8230;&#8203;" value="&#8230;&#8203;" /&gt; to be passed to the authentication mechanisms.</p>
</dd>
<dt class="hdlist1">&lt;credentials&gt;&#8230;&#8203;&lt;/credentials&gt;</dt>
<dd>
<p>One or more credentials available for use during authentication.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The content of this element is the same as documented for [&lt;protection-parameter-credentials /&gt;|#client-credentials-type]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;credentials&gt;
    &lt;key-store-reference&gt;...&lt;/key-store-reference&gt;
    &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
    &lt;clear-password password="..." /&gt;
    &lt;key-pair public-key-pem="..." private-key-pem="..." /&gt;
    &lt;certificate private-key-pem="..." pem="..." /&gt;
    &lt;public-key-pem&gt;...&lt;/public-key-pem&gt;
    &lt;bearer-token value="..." /&gt;
    &lt;oauth2-bearer-token token-endpoint-uri="..."&gt;...&lt;/oauth2-bearer-token&gt;
&lt;/credentials&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;set-authorization-name name="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>Specify the name that should be used for authorization if different from the authentication identity.</p>
</dd>
<dt class="hdlist1">&lt;providers/&gt;</dt>
<dd>
<p>This element is described in more detail within [&lt;providers /&gt;|#Providers] and overrides the default or inherited provider discovery with a definition specific to this authentication configuration definition.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The final two elements are mutually exclusive and define how the SASL mechanism factories will be discovered for authentication.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;use-provider-sasl-factory /&gt;</dt>
<dd>
<p>The [java.security.Provider|https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html] instances either inherited or defined in this configuration will be used to locate the available SASL client factories.</p>
</dd>
<dt class="hdlist1">&lt;use-service-loader-sasl-factory module-name="&#8230;&#8203;" /&gt;</dt>
<dd>
<p>SASL client factories will be discovered using service loader discovery on the specified module or if not specified using the ClassLoader loading the configuration.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="net-authenticator">&lt;net-authenticator /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This element contains no specific configuration, however if present the [org.wildfly.security.auth.util.ElytronAuthenticator|http://wildfly-security.github.io/wildfly-elytron/1.1.x/org/wildfly/security/auth/util/ElytronAuthenticator.html] will be registered with [java.net.Authenticator.setDefault(Authenticator)|https://docs.oracle.com/javase/8/docs/api/java/net/Authenticator.html#setDefault-java.net.Authenticator-] meaning that the WildFly Elytron authentication client configuration can be used for authentication where the JDK APIs are used for HTTP calls which require authentication.</p>
</div>
<div class="paragraph">
<p>There are some limitations within this integration as the JDK will cache the authentication JVM wide from the first call so is better used in stand alone processes that don&#8217;t require different credentials for different calls to the same URI,</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SSLContexts">&lt;ssl-contexts /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The &lt;ssl-contexts /&gt; element holds individual names SSLContext definitions that can subsequently be matched by the  [&lt;ssl-context-rules /&gt;|#Rules].</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;ssl-contexts&gt;
            &lt;default-ssl-context name="..."/&gt;
            &lt;ssl-context name="..."&gt;
                &lt;key-store-ssl-certificate&gt;...&lt;/key-store-ssl-certificate&gt;
                &lt;trust-store key-store-name="..." /&gt;
                &lt;cipher-suite selector="..." /&gt;
                &lt;protocol names="... ..." /&gt;
                &lt;provider-name name="..." /&gt;
                &lt;providers&gt;...&lt;/providers&gt;
                &lt;certificate-revocation-list path="..." maximum-cert-path="..." /&gt;
            &lt;/ssl-context&gt;
        &lt;/ssl-contexts&gt;
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The element &lt;default-ssl-context name="&#8230;&#8203;" /&gt; simply takes the SSLContext obtainable from [javax.net.ssl.SSLContext.getDefault()|https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLContext.html#getDefault--] and assigns it a name so it can referenced from the [&lt;ssl-context-rules /&gt;|#Rules].  This element can be repeated meaning the default SSLContext can be referenced using different names.</p>
</div>
<div class="paragraph">
<p>The element &lt;ssl-context /&gt; is used to define a named configured SSLContext, each of the child elements is optional and can be specified at most once to build up the configuration of the SSLContext.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;key-store-ssl-certificate&gt;</dt>
<dd>
<p>Defines a reference to an entry within a KeyStore for the key and certificate to use in this SSLContext.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The overall structure of this element is: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;key-store-ssl-certificate key-store-name="..." alias="..."&gt;
   &lt;key-store-clear-password password="..." /&gt;
    &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
   &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-ssl-certificate&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This structure is identical to the structure use in [&lt;key-store-credential /&gt;|#key-store-credential], the only difference being it is now to obtain the entry for the key and certificate, the nested elements however remain the protection parameter to unlock the entry.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;trust-store-key-store-name /&gt;</dt>
<dd>
<p>A reference to a KeyStore that will be used to initialise the TrustManager.</p>
</dd>
<dt class="hdlist1">&lt;cipher-suite-selector /&gt;</dt>
<dd>
<p>Configuration to filter the enabled cipher suites, the format of the selector is [org.wildfly.security.ssl.CipherSuiteSelector.fromString(selector)|http://wildfly-security.github.io/wildfly-elytron/1.1.x/org/wildfly/security/ssl/CipherSuiteSelector.html#fromString-java.lang.String-].</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following would be a cipher suite selector performing the default filtering.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;cipher-suite selector="DEFAULT" /&gt;</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;protocol /&gt;</dt>
<dd>
<p>used to define a space separated list of the protocols to be supported.</p>
</dd>
<dt class="hdlist1">&lt;provider-name /&gt;</dt>
<dd>
<p>Once the available providers have been identified only the provider with the name defined on this element will be used.</p>
</dd>
<dt class="hdlist1">&lt;providers/&gt;</dt>
<dd>
<p>This element is described in more detail within [&lt;providers /&gt;|#Providers] and overrides the default or inherited provider discovery with a definition specific to this SSLContext definition.</p>
</dd>
<dt class="hdlist1">&lt;certificate-revocation-list /&gt;</dt>
<dd>
<p>The presence of this element enabled checking the peer&#8217;s certificate against a certificate revocation list, this element defines both a path to the certificate revocation list and also specifies the maximum number of non-self-issued intermediate certificates that may exist in a certification path</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Providers">&lt;providers /&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>&lt;providers /&gt;</em> element is used to define how [java.security.Provider|https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html] instances are located when required.  The other configuration sections of <em>&lt;authentication-client /&gt;</em> are independent of each other, the <em>&lt;providers /&gt;</em> configuration however applies to the current element and it&#8217;s children unless overridden, this configuration can be specified in the following locations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;providers /&gt;
        ...
        &lt;credential-stores&gt;
            &lt;credential-store name=".."&gt;
                ...
                &lt;providers /&gt;
            &lt;/credential-store&gt;
        &lt;credential-stores&gt;
        ...
        &lt;authentication-configurations&gt;
            &lt;authentication-configuration name="..."&gt;
                ...
                &lt;providers /&gt;
            &lt;/authentication-configuration&gt;
        &lt;/authentication-configurations&gt;
        ...
        &lt;ssl-contexts&gt;
            &lt;ssl-context name="..."&gt;
                ...
                &lt;providers /&gt;
            &lt;/ssl-context&gt;
        &lt;/ssl-contexts&gt;
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If an individual &lt;credential-store /&gt;, &lt;authentication-configuration /&gt;, or &lt;ssl-context /&gt; contains a &lt;providers /&gt; definition that that definition will apply specifically to that instance.  If a configured item does not contain a &lt;providers /&gt; definition but a top level &lt;providers /&gt; is defined within &lt;authentication-configuration /&gt; then that will be used instead.</p>
</div>
<div class="paragraph">
<p>The &lt;providers /&gt; element can be defined as: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;providers&gt;
    &lt;global /&gt;
    &lt;use-service-loader module-name="..." /&gt;
&lt;/providers&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both the child elements are optional, can appear in any order and can be repeated although repeating &lt;global /&gt; would not really be beneficial.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&lt;global /&gt;</dt>
<dd>
<p>The providers from [java.security.Security.getProviders()|https://docs.oracle.com/javase/8/docs/api/java/security/Security.html#getProviders--]</p>
</dd>
<dt class="hdlist1">&lt;credential-stores /&gt;</dt>
<dd>
<p>Providers loaded using service loader discovery from the module specified, if no module is specified the ClassLoader which loaded the authentication client is used.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Where no &lt;provider /&gt; configuration exists the default behaviour is the equivalent of: -</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;providers&gt;
    &lt;use-service-loader /&gt;
    &lt;global /&gt;
&lt;/providers&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives the WildFly Elytron Provider priority over any globally registered Providers but also allows for the globally registered providers to be used.</p>
</div>
</div>
</div>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/wildflysite/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Wildfly</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wildfly</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wildfly"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wildfly</span></a></li><li><a href="https://www.twitter.com/WildFlyAS"><svg class="svg-icon"><use xlink:href="/wildflysite/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WildFlyAS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
