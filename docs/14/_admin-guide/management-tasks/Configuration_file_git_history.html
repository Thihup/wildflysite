<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">


</head>

<body class="Git Configuration file history">
  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
          
            <a href="/wildflysite/docs/14/" class="active">Docs</a>
          
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="docs-page grid-wrapper">
  <div class="grid__item width-12-12 docs-v-icons">
    <a href="/wildflysite/docs/13/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-13-inactive.png"></a>
    <a href="https://docs.wildfly.org/12/" target="_blank"><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-12-inactive.png"></a>
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-11-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-10-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-09-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-08-coming.png">
  </div>
  <div class="grid__item width-12-12"><h1 class="title">Git Configuration file history</h1></div>
  <div class="grid__item width-3-12 doc-toc"><ul class="inline_toc">
  <li><a href="#local_git_repository">Local Git Repository</a></li>
  <li><a href="#remote_git_repository">Remote Git Repository</a></li>
  <li><a href="#snapshots">Snapshots</a></li>
  <li><a href="#remote_push">Remote push</a></li>
</ul></div>
  <div class="grid__item width-9-12 doc-content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>To enhance the initial <a href="#Configuration_file_history">configuration file history</a> we have now a native Git support to manage the configuration history. This feature goes a little farther than the initial configuration file history in that it also manages content repository content and all the configuration files (such as properties). This feature only work for <strong>standalone servers</strong> using the default directory layout.</p>
</div>
<div class="paragraph">
<p>As mentioned in <a href="#Command_line_parameters">Command line parameters</a> we support the usage of a remote Git repository to pull the configuration from or create or use a local Git repository.
In fact if a <code>.git</code> directory exists under <code>jboss.server.base.dir</code> then using Git for managing configuration files will be automatically activated.
Each modification of the content or the configuration will result in a new commit when the operation is successful and there are changes to commit. If there is an authenticated user then it will be stored as the author of the commit.
Please note that this is a real Git repository so using a native Git client you can manipulate it.</p>
</div>
<div class="paragraph">
<p>Now if we execute a management operation that modifies
the model, for example adding a new system property using the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] /system-property=test:add(value="test123")
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What happens is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The change is applied to the configuration file.</p>
</li>
<li>
<p>The configuration file is added to a new commit.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="local_git_repository">Local Git Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting the server with the option <code>--git-repo=local</code> will initiate a Git repository if none exists or use the current Git repository. When initiating the local Git repository a <code>.gitignore</code> file will be created and added to the initial commit.</p>
</div>
<div class="paragraph">
<p>If a <code>--git-branch</code> parameter is added then the repository will be checked out on the supplied branch. Please note that the branch will not be automatically created and must exist in the repository already. By default, if no parameter is specified, the branch <code>master</code> will be used.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="remote_git_repository">Remote Git Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a remote Git repository is provided then the server will try to pull from it at boot. If this is the first time we are pulling then local files will be deleted to avoid the pull to fail because of the need to overwrite those existing files.
The parameter for <code>--git-repo</code> can be a URL or a remote alias provided you have manually added it to the local git configuration.</p>
</div>
<div class="paragraph">
<p>If a <code>--git-branch</code> parameter is added then the branch will be pulled, otherwise it will default to <code>master</code>.</p>
</div>
<div class="paragraph">
<p>For example this is an elytron configuration file that you could use to connect to Github via the <code>--git-auth</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;authentication-client xmlns="urn:elytron:1.0"&gt;
        &lt;authentication-rules&gt;
            &lt;rule use-configuration="test-login"&gt;
            &lt;/rule&gt;
        &lt;/authentication-rules&gt;
        &lt;authentication-configurations&gt;
            &lt;configuration name="test-login"&gt;
                &lt;sasl-mechanism-selector selector="BASIC" /&gt;
                &lt;set-user-name name="ehsavoie" /&gt;
                &lt;credentials&gt;
                    &lt;clear-password password="my_api_key" /&gt;
                &lt;/credentials&gt;
                &lt;set-mechanism-realm name="testRealm" /&gt;
            &lt;/configuration&gt;
        &lt;/authentication-configurations&gt;
    &lt;/authentication-client&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sample command line to start the server using the <code>standalone-full.xml</code> file pulled from Github and being authenticated via the Elytron configuration file <code>github-wildfly-config.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./standalone.sh --git-repo=https://github.com/wildfly/wildfly-config.git --git-auth=file:///home/ehsavoie/tmp/github-wildfly-config.xml -c standalone-full.xml</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="snapshots">Snapshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the commits taken by the server as described above you
can manually take snapshots which will be stored as <code>tags</code> in the Git repository.
You can choose the tag name and the commit message attached to this tag.</p>
</div>
<div class="paragraph">
<p>You may also take your own snapshots using the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] :take-snapshot(name="snapshot", comment="1st snapshot")
{
    "outcome" =&gt; "success",
    "result" =&gt; "1st snapshot"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the CLI to list all the snapshots</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] :list-snapshots
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "directory" =&gt; "",
        "names" =&gt; [
            "snapshot : 1st snapshot",
            "refs/tags/snapshot",
            "snapshot2 : 2nd snapshot",
            "refs/tags/snapshot2"
        ]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To delete a particular snapshot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] :delete-snapshot(name="snapshot2")
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="remote_push">Remote push</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may need to push your repository changes to a remote repository so you can share them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] :publish-configuration(location="origin")
{"outcome" =&gt; "success"}</code></pre>
</div>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' class='dark-background' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' class='dark-background' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' class='dark-background' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' class='dark-background' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads" class="dark-background">Downloads</a></li>
          
            <li><a href="/wildflysitef/docs" class="dark-background">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly" class="dark-background">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY" class="dark-background">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion" class="dark-background">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork" class="dark-background">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS" class="dark-background">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion" class="dark-background">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke" class="dark-background">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/" class="dark-background">APIMan</a></li>
          
            <li><a href="http://arquillian.org" class="dark-background">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/" class="dark-background">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/" class="dark-background">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler" class="dark-background">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework" class="dark-background">Darcy</a></li>
          
            <li><a href="http://debezium.io/" class="dark-background">Debezium</a></li>
          
            <li><a href="https://www.drools.org/" class="dark-background">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/" class="dark-background">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/" class="dark-background">Hawkular</a></li>
          
            <li><a href="http://hawt.io/" class="dark-background">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/" class="dark-background">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/" class="dark-background">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/" class="dark-background">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/" class="dark-background">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging" class="dark-background">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/" class="dark-background">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/" class="dark-background">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/" class="dark-background">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/" class="dark-background">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/" class="dark-background">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/" class="dark-background">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/" class="dark-background">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/" class="dark-background">Picketbox</a></li>
          
            <li><a href="http://resteasy.jboss.org/" class="dark-background">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/" class="dark-background">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/" class="dark-background">Savara</a></li>
          
            <li><a href="http://seamframework.org/" class="dark-background">Seam</a></li>
          
            <li><a href="http://arquillian.org/" class="dark-background">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/" class="dark-background">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/" class="dark-background">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/" class="dark-background">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/" class="dark-background">Teiid</a></li>
          
            <li><a href="http://wildfly-swarm.io/" class="dark-background">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/" class="dark-background">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/" class="dark-background">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" class="dark-background" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/RHLogo_white.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
</body>

</html>