<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <link rel="shortcut icon" type="image/png" href="/wildflysite/favicon.ico" >
  <link rel="stylesheet" href="/wildflysite/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
 
    gtag('config', 'UA-125236544-1');
  </script>


</head>

<body class="JSF Configuration">
  <div class="header-banner">
  <p>This site is in beta. Please share feedback by creating an <a href="https://github.com/jbossorg/wildflysite/issues/new" target="_blank">issue ticket</a>.</p>
</div>

  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/wildflysite/" class="">Home</a>
        </li>
        <li>
          <a href="/wildflysite/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/wildflysite/blog/" class="">Blog</a>
        </li>
        <li>
          <a href="/wildflysite/about/" class="">About</a>
        </li>
        <li>
          <a href="/wildflysite/contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="docs-page grid-wrapper">
  <div class="grid__item width-12-12 docs-v-icons">
    <a href="/wildflysite/docs/14/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-14-active.png"></a>
    <a href="/wildflysite/docs/13/" ><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-13-inactive.png"></a>
    <a href="https://docs.wildfly.org/12/" target="_blank"><img src="/wildflysite/assets/img/docs/wildfly_icons_docs-12-inactive.png"></a>
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-11-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-10-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-09-coming.png">
    <img src="/wildflysite/assets/img/docs/wildfly_icons_docs-08-coming.png">
  </div>
  <div class="grid__item width-12-12"><h1 class="title">JSF Configuration</h1></div>
  <div class="grid__item width-3-12 doc-toc"><ul class="inline_toc">
  <li><a href="#installing-a-new-jsf-implementation-manually">Installing a new JSF implementation manually</a>
    <ul>
      <li><a href="#add-a-module-slot-for-the-new-jsf-implementation-jar">Add a module slot for the new JSF implementation JAR</a></li>
      <li><a href="#add-a-module-slot-for-the-new-jsf-api-jar">Add a module slot for the new JSF API JAR</a></li>
      <li><a href="#add-a-module-slot-for-the-jsf-injection-jar">Add a module slot for the JSF injection JAR</a></li>
      <li><a href="#for-myfaces-only---add-a-module-for-the-commons-digester-jar">For MyFaces only - add a module for the commons-digester JAR</a></li>
      <li><a href="#start-the-server">Start the server</a></li>
    </ul>
  </li>
  <li><a href="#changing-the-default-jsf-implementation">Changing the default JSF implementation</a></li>
  <li><a href="#configuring-a-jsf-app-to-use-a-non-default-jsf-implementation">Configuring a JSF app to use a non-default JSF implementation</a></li>
  <li><a href="#disallowing-doctype-declarations">Disallowing DOCTYPE declarations</a></li>
</ul></div>
  <div class="grid__item width-9-12 doc-content"><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
JSF configuration is handled by the JSF subsystem. The JSF subsystem
allows multiple JSF implementations to be installed on the same WildFly
server. In particular, any version of Mojarra or MyFaces that implements
spec level 2.1 or higher can be installed. For each JSF implementation,
a new slot needs to be created under <code>com.sun.jsf-impl</code>,
<code>javax.faces.api</code>, and <code>org.jboss.as.jsf-injection</code>. When the JSF
subsystem starts up, it scans the module path to find all of the JSF
implementations that have been installed. The default JSF implementation
that WildFly should use is defined by the <code>default-jsf-impl-slot</code>
attribute.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-a-new-jsf-implementation-manually">Installing a new JSF implementation manually</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A new JSF implementation can be manually installed as follows:</p>
</div>
<div class="sect2">
<h3 id="add-a-module-slot-for-the-new-jsf-implementation-jar">Add a module slot for the new JSF implementation JAR</h3>
<div class="ulist">
<ul>
<li>
<p>Create the following directory structure under the
WILDFLY_HOME/modules directory:<br>
WILDFLY_HOME/modules/com/sun/jsf-impl/&lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;<br>
<br>
For example, for Mojarra 2.2.11, the above path would resolve to:<br>
WILDFLY_HOME/modules/com/sun/jsf-impl/mojarra-2.2.11</p>
</li>
<li>
<p>Place the JSF implementation JAR in the &lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;
subdirectory. In the same subdirectory, add a <code>module.xml</code> file similar
to the
<a href="https://github.com/wildfly/wildfly/blob/master/jsf/multi-jsf-installer/src/main/resources/mojarra-impl-module.xml">Mojarra</a>
or
<a href="https://github.com/wildfly/wildfly/blob/master/jsf/multi-jsf-installer/src/main/resources/myfaces-impl-module.xml">MyFaces</a>
template examples. Change the <code>resource-root-path</code> to the name of your
JSF implementation JAR and fill in appropriate values for $\{
<code>jsf-impl-name</code>} and $\{ <code>jsf-version</code>}.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="add-a-module-slot-for-the-new-jsf-api-jar">Add a module slot for the new JSF API JAR</h3>
<div class="ulist">
<ul>
<li>
<p>Create the following directory structure under the
WILDFLY_HOME/modules directory:<br>
WILDFLY_HOME/modules/javax/faces/api/&lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;</p>
</li>
<li>
<p>Place the JSF API JAR in the &lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;
subdirectory. In the same subdirectory, add a <code>module.xml</code> file similar
to the
<a href="https://github.com/wildfly/wildfly/blob/master/jsf/multi-jsf-installer/src/main/resources/mojarra-api-module.xml">Mojarra</a>
or
<a href="https://github.com/wildfly/wildfly/blob/master/jsf/multi-jsf-installer/src/main/resources/myfaces-api-module.xml">MyFaces</a>
template examples. Change the <code>resource-root-path</code> to the name of your
JSF API JAR and fill in appropriate values for $\{ <code>jsf-impl-name</code>} and
$\{ <code>jsf-version</code>}.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="add-a-module-slot-for-the-jsf-injection-jar">Add a module slot for the JSF injection JAR</h3>
<div class="ulist">
<ul>
<li>
<p>Create the following directory structure under the
WILDFLY_HOME/modules directory:<br>
WILDFLY_HOME/modules/org/jboss/as/jsf-injection/&lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;</p>
</li>
<li>
<p>Copy the wildfly-jsf-injection JAR and the weld-core-jsf JAR from
WILDFLY_HOME/modules/system/layers/base/org/jboss/as/jsf-injection/main
to the &lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt; subdirectory.</p>
</li>
<li>
<p>In the &lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt; subdirectory, add a <code>module.xml</code>
file similar to the
<a href="https://gist.github.com/fjuma/30160f0e95ade328253118c706339604">Mojarra</a>
or
<a href="https://gist.github.com/fjuma/f73b05c3864255e7b10b49f989f0b75e">MyFaces</a>
template examples and fill in appropriate values for $\{
<code>jsf-impl-name</code>}, $\{ <code>jsf-version</code>}, $\{ <code>version.jboss.as</code>}, and $\{
<code>version.weld.core</code>}. (These last two placeholders depend on the
versions of the wildfly-jsf-injection and weld-core-jsf JARs that were
copied over in the previous step.)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="for-myfaces-only---add-a-module-for-the-commons-digester-jar">For MyFaces only - add a module for the commons-digester JAR</h3>
<div class="ulist">
<ul>
<li>
<p>Create the following directory structure under the
WILDFLY_HOME/modules directory:<br>
WILDFLY_HOME/modules/org/apache/commons/digester/main</p>
</li>
<li>
<p>Place the
<a href="http://search.maven.org/remotecontent?filepath=commons-digester/commons-digester/1.8/commons-digester-1.8.jar">commons-digester</a>
JAR in WILDFLY_HOME/modules/org/apache/commons/digester/main. In the
<code>main</code> subdirectory, add a <code>module.xml</code> file similar to this
<a href="https://github.com/wildfly/wildfly/blob/master/jsf/multi-jsf-installer/src/main/resources/myfaces-digester-module.xml">template</a>.
Fill in the appropriate value for $\{ <code>version.commons-digester</code>}.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="start-the-server">Start the server</h3>
<div class="paragraph">
<p>After starting the server, the following CLI command can be used to
verify that your new JSF implementation has been installed successfully.
The new JSF implementation should appear in the output of this command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">[standalone@localhost:9990 /] /subsystem=jsf:list-active-jsf-impls()</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changing-the-default-jsf-implementation">Changing the default JSF implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following CLI command can be used to make a newly installed JSF
implementation the default JSF implementation used by WildFly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">/subsystem=jsf/:write-attribute(name=default-jsf-impl-slot,value=&lt;JSF_IMPL_NAME&gt;-&lt;JSF_VERSION&gt;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A server restart will be required for this change to take effect.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-a-jsf-app-to-use-a-non-default-jsf-implementation">Configuring a JSF app to use a non-default JSF implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A JSF app can be configured to use an installed JSF implementation
that&#8217;s not the default implementation by adding a
<code>org.jboss.jbossfaces.JSF_CONFIG_NAME</code> context parameter to its
<code>web.xml</code> file. For example, to indicate that a JSF app should use
MyFaces 2.2.12 (assuming MyFaces 2.2.12 has been installed on the
server), the following context parameter would need to be added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;context-param&gt;
  &lt;param-name&gt;org.jboss.jbossfaces.JSF_CONFIG_NAME&lt;/param-name&gt;
  &lt;param-value&gt;myfaces-2.2.12&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a JSF app does not specify this context parameter, the default JSF
implementation will be used for that app.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disallowing-doctype-declarations">Disallowing DOCTYPE declarations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following CLI commands can be used to disallow DOCTYPE declarations
in JSF deployments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">/subsystem=jsf:write-attribute(name=disallow-doctype-decl, value=true)
reload</code></pre>
</div>
</div>
<div class="paragraph">
<p>This setting can be overridden for a particular JSF deployment by
adding the <code>com.sun.faces.disallowDoctypeDecl</code> context parameter
to the deployment&#8217;s <code>web.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;context-param&gt;
  &lt;param-name&gt;com.sun.faces.disallowDoctypeDecl&lt;/param-name&gt;
  &lt;param-value&gt;false&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</div>
</div></div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/wildflysite/"><img class="wf-logo" src="/wildflysite/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/wildflysite/downloads">Downloads</a></li>
          
            <li><a href="https://docs.wildfly.org">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://community.jboss.org/en/wildfly?view=discussion">Join the forum</a></li>
          
            <li><a href="https://www.hipchat.com/gFOhnVQke">Join HipChat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://devstudio.jboss.com/">JBoss DevStudio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://picketbox.jboss.org/">Picketbox</a></li>
          
            <li><a href="https://quarkus.io/">Quarkus</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="http://seamframework.org/">Seam</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="https://wildfly-security.github.io/wildfly-elytron/">WildFly Elytron</a></li>
          
            <li><a href="http://wildfly-swarm.io/">WildFly Swarm</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/"><img src="/wildflysite/assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/wildflysite/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
